(()=>{var ce=Object.defineProperty,le=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var X=(e,n,t)=>n in e?ce(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,U=(e,n)=>{for(var t in n||(n={}))pe.call(n,t)&&X(e,t,n[t]);if(Q)for(var t of Q(n))ue.call(n,t)&&X(e,t,n[t]);return e},V=(e,n)=>le(e,de(n));var A="storage";function Y(e){A=e}function fe(){let e=JSON.parse(localStorage.getItem(A))||{};for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<M()&&(delete e[n],I(n,null))}return e}function S(e){let n=fe();return n[e]&&n[e][0]||null}function I(e,n,t){let r=JSON.parse(localStorage.getItem(A))||{};n?r[e]=[n,t?M()+t:0]:delete r[e],localStorage.setItem(A,JSON.stringify(r)),ge()}function Z(e){I(e,null)}function M(){return Math.floor(Date.now()/1e3)}function ge(){let e=JSON.parse(localStorage.getItem(A));for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<M()&&delete e[n]}localStorage.setItem(A,JSON.stringify(e))}function j(){console.log("%cLucead","background:#EEE;color:#2A4B9A;border-radius:4px;padding:2px",...arguments)}function $(){console.error("%cLucead","background:#EEE;color:#4EA05D;border-radius:4px;padding:2px",...arguments)}function K(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"m":"d"}function R(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function q(){let n=location.hash.replace("#","").split("&"),t={},r="lucead-";for(let o of n){let[i,s]=o.split("=");t[i.replace(r,"")]=s}return t}function ee(e){return new Promise((n,t)=>{let r=document.createElement("script");r.src=e,r.onload=n,r.onerror=t,document.head.appendChild(r)})}function te(e,n){return n==="USD"?e:n==="EUR"?e*1.18:0}var re="v1211.1",he=1600,ne=!1,L=!1,ie=!0,_e=!0,ye=!1,He=window.rtbpbjs||window.pbjs||window._abPbJs,m=window.lucead_site,B=window.location.hash.includes("prebid-dev"),oe=0,E="https://lucead.com",we="https://lucead.com",be="https://s.lucead.com",z=q(),se;function ae(){let e={ver:"1.0",complete:1,nodes:[]};return m!=null&&m.schain_domain&&(m!=null&&m.schain_id)&&e.nodes.push({asi:m.schain_domain,sid:m.schain_id,hp:1}),e}function ve(){return`${Math.trunc(Math.random()*1e9)}`}async function xe(e){if(S("country"))return S("country");try{e=e.replace("/go","");let n=await fetch(`${e}/go/country`).then(t=>t.text());return I("country",n,86400*30),n}catch(n){return null}}function Se(){let e="mesured";if(S(e))return;I(e,"1",86400*7);let n=!!navigator.runAdAuction,t=!!document.browsingTopics,r=`${E}/go/report/features?is_chrome=${R()?1:0}&pa_on=${n?1:0}&topics_on=${t?1:0}`;fetch(r)}async function O(e,n={}){let t=new AbortController,r=setTimeout(()=>t.abort(),he);try{let o=await fetch(e,V(U({},n),{signal:t.signal,credentials:"include"}));return clearTimeout(r),o}catch(o){return clearTimeout(r),null}}function W(e,n=null,t=null){if(!e)return null;if(n&&t){let r=JSON.stringify({ssp:n,placement_id:t,domain:location.hostname,metric:"renders"});e+=`<script>navigator.sendBeacon('${E}/go/report/event','${r}');<\/script>`;let o={grid:39534936,magnite:39534938,criteo:39534939};o[n]&&(new Image().src=`https://www8.smartadserver.com/imp?imgid=${o[n]}&tmstp=${Date.now()}&tgt=`)}return e.includes("<html")?e:`<html lang="en"><body style="margin:0;background-color:#FFF">${e}</body></html>`}function N(e,n){var o,i,s,a,h,d,u,c,l,w;let t=e.ortbConverter({}).toORTB({bidRequests:[n],bidderRequest:e.bidderRequest});if((o=t==null?void 0:t.device)!=null&&o.geo&&(delete t.device.devicetype,delete t.device.flashver,delete t.device.js,delete t.device.lmt,delete t.device.pxratio,delete t.device.ppi,delete t.device.language,delete t.site.mobile,delete t.device.carrier,delete t.device.ip,delete t.device.geo,delete t.device.geofetch,delete t.content,delete t.cur,delete t.publisher,delete t.site.cat,delete t.site.name,delete t.site.pagecat,delete t.site.privacypolicy,delete t.site.sectioncat),e.consent?(e.deepSetValue(t,"user.ext.consent",(i=e==null?void 0:e.consent)==null?void 0:i.tcString),e.deepSetValue(t,"regs.ext.gdpr",(s=e==null?void 0:e.consent)!=null&&s.gdprApplies?1:0)):e.deepSetValue(t,"regs.ext.gdpr",0),(a=t.imp)!=null&&a.length&&((h=n==null?void 0:n.sizes)!=null&&h.length)){for(let b of t.imp)if(b.banner.w=n.sizes[0][0],b.banner.h=n.sizes[0][1],m.id&&((d=n==null?void 0:n.params)!=null&&d.placementId)){let _=location.hostname+"_"+((u=n==null?void 0:n.params)==null?void 0:u.placementId);b.tagid=_,e.deepSetValue(b,"ext.gpid",_)}}(l=(c=t==null?void 0:t.source)==null?void 0:c.ext)!=null&&l.wrapper||(e.deepSetValue(t,"source.ext.wrapper","Prebid_js"),e.deepSetValue(t,"source.ext.wrapper_version",(e==null?void 0:e.prebid_version)||((w=window==null?void 0:window.pbjs)==null?void 0:w.version))),n!=null&&n.userIdAsEids&&e.deepSetValue(t,"user.ext.eids",n.userIdAsEids);let r=ae();return r&&e.deepSetValue(t,"source.ext.schain",r),t}function D(e,n=null,t=null){var i;if(!((i=e==null?void 0:e.seatbid)!=null&&i.length))return null;let r=e.seatbid[0].bid.filter(s=>s&&s.price>0&&s.adm);r.sort((s,a)=>a.price-s.price);let o=r[0];return{cpm:(o==null?void 0:o.price)||0,currency:e.cur||"USD",ad:W((o==null?void 0:o.adm)||null,n,t),size:{width:o==null?void 0:o.w,height:o==null?void 0:o.h},ssp:n,advertiser_domains:(o==null?void 0:o.adomain)||null}}async function Ie(){return new Promise(e=>{window.__tcfapi?window.__tcfapi("getTCData",2,(n,t)=>{e(t?n:null)}):e(null)})}function Oe(e){if(S("sync"))return;I("sync",1,86400);let n=`gdpr=${Number(e==null?void 0:e.gdprApplies)}&gdpr_consent=${e==null?void 0:e.tcString}`,t=[`https://hb.360yield.com/prebid-universal-creative/load-cookie.html?pbs=1&${n}`,`https://eus.rubiconproject.com/usync.html?${n}`];for(let r of t){let o=document.createElement("iframe");o.id="lucead-cookie-sync",o.src=r,o.style.display="none",document.body.appendChild(o)}}async function ke(e){try{return await fetch(`${e.static_url}/prebid/site?p=`+e.bidRequests[0].params.placementId).then(n=>n.json())}catch(n){return null}}async function Ae({base_url:e,placement_id:n,bidRequest:t,bidderRequest:r,is_sra:o,endpoint_url:i}){var w,b;let s=t.sizes.map(_=>({width:_[0],height:_[1]}));s!=null&&s.length||s||(s=[{width:300,height:250}]);let a=e,h=K(),d=Ee(t),u={prebid_bid_id:t==null?void 0:t.bidId,prebid_request_id:window.lucead_request_id||(r==null?void 0:r.bidderRequestId),prerender:ne,placement_id:n,floor:d,floor_currency:"USD",is_sra:o,endpoint_url:i,device:h,is_dev:B,country:se,page_url:location.href,page_path:location.pathname,page_height:(w=document==null?void 0:document.body)==null?void 0:w.scrollHeight,data_saver_enabled:!!((b=navigator==null?void 0:navigator.connection)!=null&&b.saveData)},c={seller:a,topWindowHostname:location.hostname,decisionLogicUrl:`${a}/js/ssp.js`,interestGroupBuyers:[a,"https://ps.avads.net","https://explorefledge.com"],auctionSignals:{lucead:u},requestedSize:s[0],sellerSignals:{},sellerCurrency:"USD",perBuyerSignals:{[a]:u,"https://ps.avads.net":{currency:"EUR"}},resolveToConfig:!1,dataVersion:2,deprecatedReplaceInURN:{"${PLACEMENT_ID}":n,"${DOMAIN}":location.hostname}},l;if(!navigator.runAdAuction||location.hash.includes("skip-pa")?l=null:l=await navigator.runAdAuction(c),l){if(await navigator.deprecatedReplaceInURN(l,{"${PLACEMENT_ID}":n,"${DOMAIN}":location.hostname}),ne){let _=document.createElement("iframe");_.src=l,_.style.display="none",document.body.appendChild(_),_.remove()}return{bid_id:t==null?void 0:t.bidId,ad:W(`<iframe src="${l}" style="width:100%;height:100%;border:none;overflow:hidden" seamless="seamless" scrolling="no" ></iframe>`),is_pa:!0,placement_id:n,cpm:d,currency:"USD",size:s[0]}}else return null}var G=null;async function je(e){let n=e.site;return se=await xe(E),await Promise.all(e.bidRequests.map(async(t,r)=>{var s,a,h,d,u,c,l,w,b,_,H,F;let o={bid_id:t==null?void 0:t.bidId,bid:0,ad:null,size:null,placement_id:((s=t==null?void 0:t.params)==null?void 0:s.placementId)||e.placement_id},i=t.sizes.map(v=>({width:v[0],height:v[1]}));try{let v=(a=t==null?void 0:t.params)==null?void 0:a.placementId,T=L?`cache-${v}-${r}-`+i.map(f=>`${f.width}x${f.height}`).join("-"):null;if(!v)return o;if(_e){if(!G)G=Date.now();else if(G<Date.now()-3e4)return o}if(L&&T){let f=S(T);if(f)return f.bid_id=t.bidId,f}let p=n.placements[v]||null,x=V(U({},e),{data:e,placement:p,placement_id:v,bidRequest:t,bid_request:t,deepSetValue:e.deepSetValue}),y=[];if(y.push(Ae(x)),(h=p==null?void 0:p.ssps)!=null&&h.improve&&y.push(Ne(x)),(d=p==null?void 0:p.ssps)!=null&&d.grid&&y.push(De(x)),(u=p==null?void 0:p.ssps)!=null&&u.criteo&&y.push(Pe(x)),(c=p==null?void 0:p.ssps)!=null&&c.smart&&y.push(ze(x)),(l=p==null?void 0:p.ssps)!=null&&l.pubmatic&&y.push(Je(x)),(w=p==null?void 0:p.ssps)!=null&&w.magnite&&y.push(Ve(x)),(b=p==null?void 0:p.ssps)!=null&&b.unruly&&y.push(Ue(x)),(_=p==null?void 0:p.ssps)!=null&&_.amazon&&y.push(Ce(x)),!y.length)return o;let g=await Promise.all(y);if(g===null||!(g!=null&&g.length))return o;if(g!=null&&g.length&&((H=g[0])!=null&&H.is_pa))return g[0];if(g=g.filter(f=>f&&f.cpm),g!=null&&g.length){(F=g[0])!=null&&F.is_pa||g.sort((k,J)=>((J==null?void 0:J.cpm)||0)-((k==null?void 0:k.cpm)||0));let f=g[0];if(f.ssp&&(f.cpm*=.68),f.bid_id=t.bidId,f.placement_id=v,L&&T){let k=`<script class="lucead-rendered">top.lucead_rendered("${T}");<\/script>`;f.ad.includes("</body>")?f.ad=f.ad.replace("</body>",k+"</body>"):f.ad+=k,I(T,f,60)}return f}else return o}catch(v){return $(v),o}}))}function Te(){if(window.pbjs)return window.pbjs;for(let e in window){let n=window[e];if(e.length>=4&&n&&n.que&&typeof n.que.push=="function"&&n.requestBids&&n.onEvent)return n}return null}function $e(){if(window.lucead_stws)return;window.lucead_stws=!0;let e=Te();e.onEvent&&e.onEvent("bidWon",n=>{n.adUnitCode&&I("pa-floor:"+n.adUnitCode,{bidderCode:n.bidderCode,cpm:te(n.cpm,n.currency)},86400)})}function Ee(e){let n=S(`pa-floor:${e.adUnitCode}`);return n?n.cpm:.4}async function C(e){let n=window.lucead_request_id||e.request_id;m||(m=await ke(e)),m!=null&&m.js&&(0,eval)(m.js),e.endpoint_url&&(E=e.endpoint_url.replace("/go","")),e.base_url&&(we=e.base_url),Me(e),$e(),e.site=m,e.consent=await Ie(),(B||z.log)&&j("Lucead for Prebid ",re,e);let t=null;ie&&setTimeout(()=>Oe(e.consent),5e3),ye&&setTimeout(Se,5e3);let r=Date.now();try{t=await je(e)}catch(o){$(o)}fetch(`${E}/go/prebid/pub`,{method:"POST",contentType:"text/plain",body:JSON.stringify({request_id:n,pa_enabled:"runAdAuction"in navigator?"on":"off",domain:location.hostname,responses:t,is_sra:e.is_sra,request_key:oe,duration:Date.now()-r})}).catch($),++oe}window.lucead_rendered=function(e){j("rendered",S(e)),Z(e)};function P(e,n){return z.mock===e?`https://adapting-opossum-stunning.ngrok-free.app/test-prebid?mock=${e}`:n}async function Ne({placement:e,data:n,bidRequest:t,prebid_version:r}){var a,h,d,u,c;let o=e.ssps.improve.ssp_placement_id.toString().split(":"),i=P("improve","https://ad.360yield.com"+(o.length===2?"/"+o[0]:"")+"/pb");z.debug&&(i+="?debug=1&ivt_bypass=1");let s=N(n,t);s.imp=[{ext:{tid:s.source.tid,bidder:o.length===2?{placementId:parseInt(o[1])||22511670,publisherId:parseInt(o[0])||1159}:{placementId:parseInt(o[0])||22511670}},banner:{topframe:1},id:t.bidId,secure:1}],s.imp[0].banner.format=t.sizes.map(l=>({w:l[0],h:l[1]})),s.id=t.bidderRequestId,s.ext={improvedigital:{sdk:{name:"pbjs",version:r||"9.15.0"}}};try{let l=await O(i,{method:"POST",contentType:"text/plain",body:JSON.stringify(s)});if((l==null?void 0:l.status)!==200)return null;if(l=await l.json(),ie&&((h=(a=l.ext)==null?void 0:a.improvedigital)!=null&&h.sync))for(let w of(d=l.ext.improvedigital)==null?void 0:d.sync)new Image().src=w;return!(l!=null&&l.seatbid)||!((c=(u=l==null?void 0:l.seatbid[0])==null?void 0:u.bid[0])!=null&&c.price)?null:(l=D(l,"improve",e.id),l)}catch(l){return $(l),null}}async function De({placement:e,data:n,bidRequest:t}){let r=P("grid","https://grid.bidswitch.net/hbjson"),o=N(n,t);o.imp[0].tagid=e.ssps.grid.ssp_placement_id.toString(),delete o.source.ext.schain;try{let i=await O(r,{method:"POST",contentType:"text/plain",body:JSON.stringify(o)});return(i==null?void 0:i.status)!==200?null:(i=await i.json(),D(i,"grid",e.id))}catch(i){return console.error(i),null}}async function Pe({placement:e,data:n,bidRequest:t,prebid_version:r,deepSetValue:o}){let i=e.ssps.criteo.ssp_placement_id.toString().split(":"),h=P("criteo",`https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request?profileId=207&av=${String(37)}&wv=${encodeURIComponent(r||"9.15.0")}&cb=${String(Math.floor(Math.random()*99999999999))}&lsavail=1&networkId=${i[0]}`);z.debug&&(h+="&debug=1");let d=N(n,t);delete d.imp[0].banner.w,delete d.imp[0].banner.h,d.imp[0].ext.bidder={publishersubid:e.id,uid:i[2]||""},e.ssps.criteo.floor&&(d.imp[0].bidfloor=e.ssps.criteo.floor,d.imp[0].bidfloorcur="USD"),i[1]&&o(d,"site.publisher.id",i[1]),o(d,"publisher.url",location.href);try{let u=await O(h,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});return(u==null?void 0:u.status)!==200?null:(u=await u.json(),D(u,"criteo",e.id))}catch(u){return console.error(u),null}}async function Ue({placement:e,data:n,bidRequest:t}){let r="https://targeting.unrulymedia.com/unruly_prebid",o=U({},n.bidderRequest);o.bids=[t],o.bids[0].params.endpoint={siteId:parseint(e.ssps.unruly.ssp_placement_id)};try{let i=await O(r,{method:"POST",contentType:"text/plain",body:JSON.stringify({bidderRequest:o})});return(i==null?void 0:i.status)!==200?(j("Criteo response not ok",i),null):(i=await i.json(),i.bids[0])}catch(i){return console.error(i),null}}async function Ce({placement:e}){let n={src:600,u:"https://adapting-opossum-stunning.ngrok-free.app/test-amazon.php",pid:"O4mON3Hn3L4Js",cb:0,ws:"1792x481",v:"24.910.1025",t:"2000",slots:'[{"sd":"test-slot-id","s":["300x250","300x600"],"sn":"test-slot-name"}]',pubid:"6bbeeb6f-714d-47ea-8434-a3c90bec82f4",gdprl:'{"status":"no-cmp"}'};console.log(e);let t="https://aax.amazon-adsystem.com/e/dtb/bid?".Object.keys(n).map(o=>`${o}=${encodeURIComponent(n[o])}`).join("&"),r=await fetch(t).then(o=>o.text()).then(o=>console.log(o));console.log(r)}async function ze({placement:e,sizes:n,size:t,prebid_version:r,transaction_id:o,bid_id:i,ad_unit_code:s,consent:a}){let h="https://prg.smartadserver.com/prebid/v1",d=e.ssps.smart.ssp_placement_id.toString().split(":").map(c=>parseInt(c));if(d.length<3)return null;let u={siteid:d[0]||351627,pageid:d[1]||1232283,formatid:d[2]||88269,ckid:d[3]||0,tagId:s,pageDomain:location.href,transactionId:o,timeout:3e3,bidId:i,prebidVersion:r||"8.37.0",schain:ae(),gpid:s,sizes:n.map(c=>({w:c[0],h:c[1]})),bidfloor:0,gdpr_consent:(a==null?void 0:a.tcString)||null};try{let c=await O(h,{method:"POST",contentType:"text/plain",body:JSON.stringify(u)});return!(c!=null&&c.ok)||(c==null?void 0:c.status)!==200||c.headers.get("content-length")==="0"?(j("Response not ok",c),null):(c=await c.json(),c?{cpm:(c==null?void 0:c.cpm)||0,currency:(c==null?void 0:c.currency)||"USD",ad:c!=null&&c.ad?W(c.ad):null,size:{width:c.width||t.width,height:c.height||t.height},ssp:"smart"}:null)}catch(c){return console.error(c),null}}async function Je({placement:e,data:n,bidRequest:t}){let r=P("pubmatic","https://hbopenbid.pubmatic.com/translator?source=prebid-client"),[o,i]=e.ssps.pubmatic.ssp_placement_id.toString().split(":"),s=N(n,t);s.at=1,s.cur=["USD"],s.imp[0].tagid=i,s.imp[0].secure=1,s.imp[0].banner.pos="0",s.site.publisher.id=o;try{let a=await O(r,{method:"POST",contentType:"text/plain",body:JSON.stringify(s)});return a!=null&&a.ok?(a=await a.json(),D(a,"pubmatic",e.id)):(j("Response not ok",a),null)}catch(a){return console.error(a),null}}async function Ve({placement:e,ad_unit_code:n,data:t,bidRequest:r}){let o=P("magnite","https://prebid-server.rubiconproject.com/openrtb2/auction"),i=e.ssps.magnite.ssp_placement_id.toString().split(":").map(a=>parseInt(a));if(i.length<3)return null;let s=N(t,r);s.imp[0].ext.prebid={bidder:{rubicon:{video:{},accountId:i[0],siteId:i[1],zoneId:i[2]}},adunitcode:n};try{let a=await O(o,{method:"POST",contentType:"text/plain",body:JSON.stringify(s)});return a!=null&&a.ok?(a=await a.json(),D(a,"magnite",e.id)):null}catch(a){return console.error(a),null}}function Me(e){let n="ig-joined-global2",t="1805860168";!navigator.runAdAuction||S(n)||setTimeout(()=>{I(n,Date.now().toString(),86400*7),ee(`${e.static_url||be}/tag/${t}.js`)},6e3)}async function Le(){if(Y("lucead"),window.lucead_prebid_data)if(Array.isArray(window.lucead_prebid_data))for(let e of window.lucead_prebid_data)C(e);else C(window.lucead_prebid_data);window.ayads_prebid=C,window.lucead_prebid=C,window.lucead_version=re,B&&(window.lucead_request_id=ve())}Le();})();
