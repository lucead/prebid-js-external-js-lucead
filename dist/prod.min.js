(()=>{var H=Object.defineProperty,Q=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var W=(e,n,t)=>n in e?H(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,h=(e,n)=>{for(var t in n||(n={}))Y.call(n,t)&&W(e,t,n[t]);if(z)for(var t of z(n))Z.call(n,t)&&W(e,t,n[t]);return e},_=(e,n)=>Q(e,X(n));function w(){console.log("%cLucead","background:#444;color:#4EA05D;border-radius:4px;padding:2px",...arguments)}function k(){console.error("%cLucead","background:#444;color:#4EA05D;border-radius:4px;padding:2px",...arguments)}var x="storage";function $(e){x=e}function K(){let e=JSON.parse(localStorage.getItem(x))||{};for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<N()&&(delete e[n],I(n,null))}return e}function j(e){let n=K();return n[e]&&n[e][0]||null}function I(e,n,t){let o=JSON.parse(localStorage.getItem(x))||{};n?o[e]=[n,t?N()+t:0]:delete o[e],localStorage.setItem(x,JSON.stringify(o)),R()}function L(e){I(e,null)}function N(){return Math.floor(Date.now()/1e3)}function R(){let e=JSON.parse(localStorage.getItem(x));for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<N()&&delete e[n]}localStorage.setItem(x,JSON.stringify(e))}var ee="v0509.1",te=1500,ne=!0,M=!0;function A(e){return"response-"+e}async function v(e,n={}){let{timeout:t=te}=n,o=new AbortController,r=setTimeout(()=>o.abort(),t),p=await fetch(e,_(h({},n),{signal:o.signal,credentials:"include"}));return clearTimeout(r),p}function C(e){return e?e.includes("<html")?e:`<html lang="en"><body style="margin:0;background-color:#FFF">${e}</body></html>`:null}function b(e,n){var o,r,p,i,l,d;let t=e.ortbConverter({}).toORTB({bidRequests:[n],bidderRequest:e.bidderRequest});if(e.consent?(e.deepSetValue(t,"user.ext.consent",(o=e==null?void 0:e.consent)==null?void 0:o.tcString),e.deepSetValue(t,"regs.ext.gdpr",(r=e==null?void 0:e.consent)!=null&&r.gdprApplies?1:0)):e.deepSetValue(t,"regs.ext.gdpr",0),(p=t.imp)!=null&&p.length)for(let s of t.imp)s.banner.w=n.sizes[0][0],s.banner.h=n.sizes[0][1];return(l=(i=t==null?void 0:t.source)==null?void 0:i.ext)!=null&&l.wrapper||(e.deepSetValue(t,"source.ext.wrapper","Prebid_js"),e.deepSetValue(t,"source.ext.wrapper_version",(e==null?void 0:e.prebid_version)||((d=window==null?void 0:window.pbjs)==null?void 0:d.version))),n!=null&&n.userIdAsEids&&e.deepSetValue(t,"user.ext.eids",n.userIdAsEids),e.deepSetValue(t,"device.js",1),e.deepSetValue(t,"at",1),e.deepSetValue(t,"cur",["USD"]),t}function O(e,n,t=null){var p;if(!((p=e==null?void 0:e.seatbid)!=null&&p.length))return null;let o=e.seatbid[0].bid.filter(i=>i&&i.price>0&&i.adm&&i.w===n.width&&i.h===n.height);o.sort((i,l)=>l.price-i.price);let r=o[0];return{cpm:(r==null?void 0:r.price)||0,currency:e.cur||"USD",ad:C((r==null?void 0:r.adm)||null),size:{width:(r==null?void 0:r.w)||n.width,height:(r==null?void 0:r.h)||n.height},ssp:t,advertiser_domains:(r==null?void 0:r.adomain)||null}}async function re(){return new Promise(e=>{window.__tcfapi?window.__tcfapi("getTCData",2,(n,t)=>{e(t?n:null)}):e(null)})}async function oe(e){try{return await fetch(`${e.static_url}/placements/info?ids=`+e.bidRequests.map(n=>n==null?void 0:n.params.placementId).join(",")).then(n=>n.json())}catch(n){return null}}window.run_ad_auctions=async function(){let e=[.05,.1,.2,.5];return Promise.all(e.map(async n=>B({base_url:"https://"+location.host,floor:n})))};async function B({base_url:e,size:n,placement_id:t,bidRequest:o,bidderRequest:r,floor:p,is_sra:i}){e||(e="https://lucead.com"),n||(n={width:300,height:250});let l=e,d={seller:l,decisionLogicUrl:`${l}/js/ssp.js`,interestGroupBuyers:[l],auctionSignals:{size:n,placement_id:t},requestedSize:n,allSlotsRequestedSizes:[n],sellerSignals:{},sellerTimeout:1e3,sellerCurrency:"EUR",perBuyerSignals:{[l]:{prebid_bid_id:o==null?void 0:o.bidId,prebid_request_id:r==null?void 0:r.bidderRequestId,placement_id:t,floor:p,is_sra:i}},perBuyerTimeouts:{"*":1e3},resolveToConfig:!1,dataVersion:2},s;if(!navigator.runAdAuction||location.hash.includes("skip-pa")?s=null:(s=await navigator.runAdAuction(d),await navigator.deprecatedReplaceInURN(s,{"${PLACEMENT_ID}":t})),s){if(ne){let m=document.createElement("iframe");m.src=s,m.style.display="none",document.body.appendChild(m),m.remove()}return{bid_id:o==null?void 0:o.bidId,ad:C(`<iframe src="${s}" style="width:${n.width}px;height:${n.height}px;border:none" seamless ></iframe>`),size:n,is_pa:!0,placement_id:t}}else return null}async function ie(e){let n=e.placements_info;return await Promise.all(e.bidRequests.map(async t=>{var p,i,l,d,s,m,a,U,P,J,D,E;let o={bid_id:t==null?void 0:t.bidId,bid:0,ad:null,size:null,placement_id:e.placement_id};if(((p=t==null?void 0:t.params)==null?void 0:p.enableContextual)===!1)return o;let r={width:t.sizes[0][0]||300,height:t.sizes[0][1]||250};try{let g=(i=t==null?void 0:t.params)==null?void 0:i.placementId;if(!g)return o;let G=await B(_(h({},e),{size:r,placement_id:g,data:e,bidRequest:t}));if(G)return G;let c=n[g]||null;if(!(c!=null&&c.ssps))return w("No placement info",g,n),o;if(M){let u=j(A(g));if(u)return u.bid_id=t.bidId,u}let y=[];if((l=c==null?void 0:c.ssps)!=null&&l.improve&&y.push(se(_(h({},e),{size:r,placement_id:(d=c==null?void 0:c.ssps)==null?void 0:d.improve,data:e,bidRequest:t}))),(s=c==null?void 0:c.ssps)!=null&&s.grid&&y.push(ce(_(h({},e),{size:r,placement_id:c==null?void 0:c.ssps.grid,deepSetValue:e.deepSetValue,data:e,bidRequest:t}))),(m=c==null?void 0:c.ssps)!=null&&m.smart&&y.push(le(_(h({},e),{sizes:t.sizes,size:r,placement_id:(a=c==null?void 0:c.ssps)==null?void 0:a.smart,transaction_id:t.transactionId,bid_id:t.bidId,ad_unit_code:t.adUnitCode,deepSetValue:e.deepSetValue,data:e,bidRequest:t}))),(U=c==null?void 0:c.ssps)!=null&&U.pubmatic&&y.push(ae(_(h({},e),{size:r,placement_id:(P=c==null?void 0:c.ssps)==null?void 0:P.pubmatic,transaction_id:t.transactionId,bid_id:t.bidId,ad_unit_code:t.adUnitCode,data:e,bidRequest:t}))),(J=c==null?void 0:c.ssps)!=null&&J.magnite&&y.push(pe(_(h({},e),{size:r,placement_id:(D=c==null?void 0:c.ssps)==null?void 0:D.magnite,ad_unit_code:t.adUnitCode,data:e,bidRequest:t,placement:c}))),!y.length)return o;let f=await Promise.all(y);if(f===null||!(f!=null&&f.length))return o;if(f=f.filter(u=>u&&u.cpm),f!=null&&f.length){(E=f[0])!=null&&E.is_pa||f.sort((S,V)=>((V==null?void 0:V.cpm)||0)-((S==null?void 0:S.cpm)||0));let u=f[0];if(u.bid_id=t.bidId,u.size=r,u.placement_id=g,M){let S=`<script>top.ayads_rendered("${g}")<\/script>`;u.ad.includes("</body>")?u.ad=u.ad.replace("</body>",S+"</body>"):u.ad+=S,I(A(g),u,86400)}return u}else return o}catch(g){return k(g),o}}))}async function F(e){let n=e.endpoint_url,t=e.request_id,[o,r]=await Promise.all([oe(e),re()]);e.consent=r,e.placements_info=o,performance.mark("lucead-start");let p=null;try{p=await ie(e)}catch(i){k(i)}performance.mark("lucead-end"),w(ee,p,performance.measure("lucead-all-responses","lucead-start","lucead-end")),fetch(`${n}/prebid/pub`,{method:"POST",contentType:"text/plain",body:JSON.stringify({request_id:t,responses:p,is_sra:e.is_sra})}).catch(k)}window.ayads_rendered=function(e){let n=A(e);w("rendered",e,j(n)),L(n)};var T=location.hash.includes("mock");async function se({data:e,bidRequest:n,prebid_version:t,size:o,placement_id:r}){var l,d;let p=T?"?mock=improve":"https://ad.360yield.com/pb",i=b(e,n);i.imp[0].ext.bidder={placementId:r||22511670},i.ext={improvedigital:{sdk:{name:"pbjs",version:t||"8.32.0"}}};try{performance.mark("lucead-improve-start");let s=await v(p,{method:"POST",contentType:"text/plain",body:JSON.stringify(i)});return s.status!==200||(s=await s.json(),!((d=(l=s==null?void 0:s.seatbid[0])==null?void 0:l.bid[0])!=null&&d.price))?null:(performance.mark("lucead-improve-end"),O(s,o,"improve"))}catch(s){return null}}async function ce({size:e,placement_id:n,data:t,bidRequest:o}){let r=T?"?mock=grid":"https://grid.bidswitch.net/hbjson",p=b(t,o);p.imp[0].tagid=n.toString();try{let i=await v(r,{method:"POST",contentType:"text/plain",body:JSON.stringify(p)});return i.status!==200?(w("Grid response not ok",i),null):(i=await i.json(),O(i,e,"grid"))}catch(i){return null}}async function le({placement_id:e,sizes:n,size:t,prebid_version:o,transaction_id:r,bid_id:p,ad_unit_code:i,consent:l}){let d="https://prg.smartadserver.com/prebid/v1",s=e.toString().split(":").map(a=>parseInt(a));if(s.length<3)return null;let m={siteid:s[0]||351627,pageid:s[1]||1232283,formatid:s[2]||88269,ckid:s[3]||0,tagId:i,pageDomain:location.href,transactionId:r,timeout:3e3,bidId:p,prebidVersion:o||"8.37.0",schain:pbjs.getConfig("schain"),gpid:i,sizes:n.map(a=>({w:a[0],h:a[1]})),bidfloor:0,gdpr_consent:(l==null?void 0:l.tcString)||null};try{let a=await v(d,{method:"POST",contentType:"text/plain",body:JSON.stringify(m)});return!a.ok||a.status!==200||a.headers.get("content-length")==="0"?(w("Response not ok",a),null):(a=await a.json(),a?{cpm:(a==null?void 0:a.cpm)||0,currency:(a==null?void 0:a.currency)||"USD",ad:a!=null&&a.ad?C(a.ad):null,size:{width:a.width||t.width,height:a.height||t.height},ssp:"smart"}:null)}catch(a){return null}}async function ae({placement_id:e,size:n,data:t,bidRequest:o}){let r=T?"?mock=pubmatic":"https://hbopenbid.pubmatic.com/translator?source=prebid-client",[p,i]=e.toString().split(":"),l=b(t,o);l.at=1,l.cur=["USD"],l.imp[0].tagid=i,l.imp[0].secure=1,l.imp[0].banner.pos=0,l.site.publisher.id=p;try{let d=await v(r,{method:"POST",contentType:"text/plain",body:JSON.stringify(l)});return d.ok?(d=await d.json(),O(d,n,"pubmatic")):(w("Response not ok",d),null)}catch(d){return null}}async function pe({placement_id:e,size:n,ad_unit_code:t,data:o,bidRequest:r,placement:p}){let i=T?"?mock=magnite":"https://prebid-server.rubiconproject.com/openrtb2/auction",l=e.toString().split(":").map(s=>parseInt(s));if(l.length<3)return null;let d=b(o,r);d.imp[0].ext.prebid={bidder:{rubicon:{video:{},accountId:l[0],siteId:l[1],zoneId:l[2]}},adunitcode:t};try{let s=await v(i,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});return s.ok?(s=await s.json(),O(s,n,"magnite",p)):null}catch(s){return null}}$("lucead");window.ayads_prebid=F;window.lucead_prebid=F;})();
