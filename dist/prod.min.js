(()=>{var K=Object.defineProperty,R=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var B=(e,n,t)=>n in e?K(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,m=(e,n)=>{for(var t in n||(n={}))ee.call(n,t)&&B(e,t,n[t]);if(W)for(var t of W(n))te.call(n,t)&&B(e,t,n[t]);return e},h=(e,n)=>R(e,q(n));function y(){console.log("%cLucead","background:#444;color:#4EA05D;border-radius:4px;padding:2px",...arguments)}function O(){console.error("%cLucead","background:#444;color:#4EA05D;border-radius:4px;padding:2px",...arguments)}function F(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"m":"d"}var x="storage";function H(e){x=e}function ne(){let e=JSON.parse(localStorage.getItem(x))||{};for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<U()&&(delete e[n],k(n,null))}return e}function P(e){let n=ne();return n[e]&&n[e][0]||null}function k(e,n,t){let i=JSON.parse(localStorage.getItem(x))||{};n?i[e]=[n,t?U()+t:0]:delete i[e],localStorage.setItem(x,JSON.stringify(i)),re()}function Q(e){k(e,null)}function U(){return Math.floor(Date.now()/1e3)}function re(){let e=JSON.parse(localStorage.getItem(x));for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<U()&&delete e[n]}localStorage.setItem(x,JSON.stringify(e))}var oe="v0912.1",se=1500,ce=!0,X=!0,b=window.rtbpbjs||window.pbjs||window._abPbJs,A,D=window.location.hash.includes("prebid-dev");function E(e){return"response-"+e}function Y(){var n;let e={ver:"1.0",complete:1,nodes:[{asi:A.schain_domain,sid:A.schain_id}]};if(b&&b.getConfig("schain"))for(let t of(n=b==null?void 0:b.getConfig("schain"))==null?void 0:n.nodes)e.nodes.push(t);return e}function Z(){return`${Math.trunc(Math.random()*1e9)}`}window.uniqid=Z;async function I(e,n={}){let{timeout:t=se}=n,i=new AbortController,r=setTimeout(()=>i.abort(),t),u=await fetch(e,h(m({},n),{signal:i.signal,credentials:"include"}));return clearTimeout(r),u}function J(e){return e?e.includes("<html")?e:`<html lang="en"><body style="margin:0;background-color:#FFF">${e}</body></html>`:null}function T(e,n){var i,r,u,c,l,d;let t=e.ortbConverter({}).toORTB({bidRequests:[n],bidderRequest:e.bidderRequest});if(e.consent?(e.deepSetValue(t,"user.ext.consent",(i=e==null?void 0:e.consent)==null?void 0:i.tcString),e.deepSetValue(t,"regs.ext.gdpr",(r=e==null?void 0:e.consent)!=null&&r.gdprApplies?1:0)):e.deepSetValue(t,"regs.ext.gdpr",0),(u=t.imp)!=null&&u.length)for(let a of t.imp)a.banner.w=n.sizes[0][0],a.banner.h=n.sizes[0][1];return(l=(c=t==null?void 0:t.source)==null?void 0:c.ext)!=null&&l.wrapper||(e.deepSetValue(t,"source.ext.wrapper","Prebid_js"),e.deepSetValue(t,"source.ext.wrapper_version",(e==null?void 0:e.prebid_version)||((d=window==null?void 0:window.pbjs)==null?void 0:d.version))),n!=null&&n.userIdAsEids&&e.deepSetValue(t,"user.ext.eids",n.userIdAsEids),e.deepSetValue(t,"device.js",1),e.deepSetValue(t,"at",1),e.deepSetValue(t,"cur",["USD"]),e.deepSetValue(t,"source.ext.schain",Y()),t}function C(e,n,t=null){var u;if(!((u=e==null?void 0:e.seatbid)!=null&&u.length))return null;let i=e.seatbid[0].bid.filter(c=>c&&c.price>0&&c.adm&&c.w===n.width&&c.h===n.height);i.sort((c,l)=>l.price-c.price);let r=i[0];return{cpm:(r==null?void 0:r.price)||0,currency:e.cur||"USD",ad:J((r==null?void 0:r.adm)||null),size:{width:(r==null?void 0:r.w)||n.width,height:(r==null?void 0:r.h)||n.height},ssp:t,advertiser_domains:(r==null?void 0:r.adomain)||null}}async function ae(){return new Promise(e=>{window.__tcfapi?window.__tcfapi("getTCData",2,(n,t)=>{e(t?n:null)}):e(null)})}async function le(e){try{return await fetch(`${e.static_url}/prebid/site?p=`+e.bidRequests[0].params.placementId).then(n=>n.json())}catch(n){return null}}async function de({base_url:e,sizes:n,placement_id:t,bidRequest:i,bidderRequest:r,floor:u,is_sra:c,endpoint_url:l}){n||(n=[{width:300,height:250}]);let d=e,a=F(),S={seller:d,decisionLogicUrl:`${d}/js/ssp.js`,interestGroupBuyers:[d,"https://ps.avads.net"],auctionSignals:{sizes:n,placement_id:t},requestedSize:n[0],sellerSignals:{},sellerTimeout:1e3,sellerCurrency:"EUR",perBuyerSignals:{[d]:{prebid_bid_id:i==null?void 0:i.bidId,prebid_request_id:window.lucead_request_id||(r==null?void 0:r.bidderRequestId),placement_id:t,floor:u,is_sra:c,endpoint_url:l,device:a,is_dev:D}},perBuyerTimeouts:{"*":1e3},resolveToConfig:!1,dataVersion:2,deprecatedReplaceInURN:{"${PLACEMENT_ID}":t,"${DOMAIN}":location.hostname}},o;if(!navigator.runAdAuction||location.hash.includes("skip-pa")?o=null:o=await navigator.runAdAuction(S),o){if(await navigator.deprecatedReplaceInURN(o,{"${PLACEMENT_ID}":t,"${DOMAIN}":location.hostname}),ce){let _=document.createElement("iframe");_.src=o,_.style.display="none",document.body.appendChild(_),_.remove()}return{bid_id:i==null?void 0:i.bidId,ad:J(`<iframe src="${o}" style="width:100%;height:100%;border:none;overflow:hidden" seamless="seamless" scrolling="no" ></iframe>`),is_pa:!0,placement_id:t}}else return null}async function ue(e){let n=e.site;return await Promise.all(e.bidRequests.map(async t=>{var c,l,d,a,S,o,_,z,M,$,G;let i={bid_id:t==null?void 0:t.bidId,bid:0,ad:null,size:null,placement_id:e.placement_id},r={width:t.sizes[0][0]||300,height:t.sizes[0][1]||250},u=t.sizes.map(f=>({width:f[0],height:f[1]}));try{let f=(c=t==null?void 0:t.params)==null?void 0:c.placementId;if(!f)return i;let L=await de(h(m({},e),{sizes:u,placement_id:f,data:e,bidRequest:t}));if(L)return L;let s=n.placements[f]||null;if(!(s!=null&&s.ssps))return y("No placement",f),i;if(X){let p=P(E(f));if(p)return p.bid_id=t.bidId,p}let w=[];if((l=s==null?void 0:s.ssps)!=null&&l.improve&&w.push(pe(h(m({},e),{size:r,placement_id:(d=s==null?void 0:s.ssps)==null?void 0:d.improve,data:e,bidRequest:t}))),(a=s==null?void 0:s.ssps)!=null&&a.grid&&w.push(fe(h(m({},e),{size:r,placement_id:s==null?void 0:s.ssps.grid,deepSetValue:e.deepSetValue,data:e,bidRequest:t}))),(S=s==null?void 0:s.ssps)!=null&&S.smart&&w.push(ge(h(m({},e),{sizes:t.sizes,size:r,placement_id:(o=s==null?void 0:s.ssps)==null?void 0:o.smart,transaction_id:t.transactionId,bid_id:t.bidId,ad_unit_code:t.adUnitCode,deepSetValue:e.deepSetValue,data:e,bidRequest:t}))),(_=s==null?void 0:s.ssps)!=null&&_.pubmatic&&w.push(me(h(m({},e),{size:r,placement_id:(z=s==null?void 0:s.ssps)==null?void 0:z.pubmatic,transaction_id:t.transactionId,bid_id:t.bidId,ad_unit_code:t.adUnitCode,data:e,bidRequest:t}))),(M=s==null?void 0:s.ssps)!=null&&M.magnite&&w.push(he(h(m({},e),{size:r,placement_id:($=s==null?void 0:s.ssps)==null?void 0:$.magnite,ad_unit_code:t.adUnitCode,data:e,bidRequest:t,placement:s}))),!w.length)return i;let g=await Promise.all(w);if(g===null||!(g!=null&&g.length))return i;if(g=g.filter(p=>p&&p.cpm),g!=null&&g.length){(G=g[0])!=null&&G.is_pa||g.sort((v,V)=>((V==null?void 0:V.cpm)||0)-((v==null?void 0:v.cpm)||0));let p=g[0];if(p.ssp&&(p.cpm*=.8),p.bid_id=t.bidId,p.size=r,p.placement_id=f,X){let v=`<script>top.lucead_rendered("${f}")<\/script>`;p.ad.includes("</body>")?p.ad=p.ad.replace("</body>",v+"</body>"):p.ad+=v,k(E(f),p,86400)}return p}else return i}catch(f){return O(f),i}}))}async function j(e){let n=e.endpoint_url.replace("/go",""),t=window.lucead_request_id||e.request_id;A=window.lucead_site||await le(e),e.site=A,e.consent=await ae(),D&&y("Lucead for Prebid ",oe,e);let i=null;try{i=await ue(e)}catch(r){O(r)}fetch(`${n}/go/prebid/pub`,{method:"POST",contentType:"text/plain",body:JSON.stringify({request_id:t,pa_enabled:!!navigator.runAdAuction,domain:location.hostname,responses:i,is_sra:e.is_sra})}).catch(O)}window.lucead_rendered=function(e){let n=E(e);y("rendered",e,P(n)),Q(n)};var N=location.hash.includes("mock");async function pe({data:e,bidRequest:n,prebid_version:t,size:i,placement_id:r}){var l,d;let u=N?"?mock=improve":"https://ad.360yield.com/pb",c=T(e,n);c.imp[0].ext.bidder={placementId:r||22511670},c.ext={improvedigital:{sdk:{name:"pbjs",version:t||"8.32.0"}}};try{performance.mark("lucead-improve-start");let a=await I(u,{method:"POST",contentType:"text/plain",body:JSON.stringify(c)});return a.status!==200||(a=await a.json(),!((d=(l=a==null?void 0:a.seatbid[0])==null?void 0:l.bid[0])!=null&&d.price))?null:(performance.mark("lucead-improve-end"),C(a,i,"improve"))}catch(a){return null}}async function fe({size:e,placement_id:n,data:t,bidRequest:i}){let r=N?"?mock=grid":"https://grid.bidswitch.net/hbjson",u=T(t,i);u.imp[0].tagid=n.toString();try{let c=await I(r,{method:"POST",contentType:"text/plain",body:JSON.stringify(u)});return c.status!==200?(y("Grid response not ok",c),null):(c=await c.json(),C(c,e,"grid"))}catch(c){return null}}async function ge({placement_id:e,sizes:n,size:t,prebid_version:i,transaction_id:r,bid_id:u,ad_unit_code:c,consent:l}){let d="https://prg.smartadserver.com/prebid/v1",a=e.toString().split(":").map(o=>parseInt(o));if(a.length<3)return null;let S={siteid:a[0]||351627,pageid:a[1]||1232283,formatid:a[2]||88269,ckid:a[3]||0,tagId:c,pageDomain:location.href,transactionId:r,timeout:3e3,bidId:u,prebidVersion:i||"8.37.0",schain:Y(),gpid:c,sizes:n.map(o=>({w:o[0],h:o[1]})),bidfloor:0,gdpr_consent:(l==null?void 0:l.tcString)||null};try{let o=await I(d,{method:"POST",contentType:"text/plain",body:JSON.stringify(S)});return!o.ok||o.status!==200||o.headers.get("content-length")==="0"?(y("Response not ok",o),null):(o=await o.json(),o?{cpm:(o==null?void 0:o.cpm)||0,currency:(o==null?void 0:o.currency)||"USD",ad:o!=null&&o.ad?J(o.ad):null,size:{width:o.width||t.width,height:o.height||t.height},ssp:"smart"}:null)}catch(o){return null}}async function me({placement_id:e,size:n,data:t,bidRequest:i}){let r=N?"?mock=pubmatic":"https://hbopenbid.pubmatic.com/translator?source=prebid-client",[u,c]=e.toString().split(":"),l=T(t,i);l.at=1,l.cur=["USD"],l.imp[0].tagid=c,l.imp[0].secure=1,l.imp[0].banner.pos="0",l.site.publisher.id=u;try{let d=await I(r,{method:"POST",contentType:"text/plain",body:JSON.stringify(l)});return d.ok?(d=await d.json(),C(d,n,"pubmatic")):(y("Response not ok",d),null)}catch(d){return null}}async function he({placement_id:e,size:n,ad_unit_code:t,data:i,bidRequest:r,placement:u}){let c=N?"?mock=magnite":"https://prebid-server.rubiconproject.com/openrtb2/auction",l=e.toString().split(":").map(a=>parseInt(a));if(l.length<3)return null;let d=T(i,r);d.imp[0].ext.prebid={bidder:{rubicon:{video:{},accountId:l[0],siteId:l[1],zoneId:l[2]}},adunitcode:t};try{let a=await I(c,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});return a.ok?(a=await a.json(),C(a,n,"magnite",u)):null}catch(a){return null}}function _e(){H("lucead"),window.lucead_prebid_data?j(window.lucead_prebid_data):(window.ayads_prebid=j,window.lucead_prebid=j),D&&(window.lucead_request_id=Z(),void 0)}_e();})();
