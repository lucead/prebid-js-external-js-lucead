(()=>{var ne=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var Q=(e,n,t)=>n in e?ne(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,w=(e,n)=>{for(var t in n||(n={}))oe.call(n,t)&&Q(e,t,n[t]);if(H)for(var t of H(n))se.call(n,t)&&Q(e,t,n[t]);return e},v=(e,n)=>re(e,ie(n));var O="storage";function X(e){O=e}function ce(){let e=JSON.parse(localStorage.getItem(O))||{};for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<U()&&(delete e[n],k(n,null))}return e}function T(e){let n=ce();return n[e]&&n[e][0]||null}function k(e,n,t){let o=JSON.parse(localStorage.getItem(O))||{};n?o[e]=[n,t?U()+t:0]:delete o[e],localStorage.setItem(O,JSON.stringify(o)),le()}function Y(e){k(e,null)}function U(){return Math.floor(Date.now()/1e3)}function le(){let e=JSON.parse(localStorage.getItem(O));for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<U()&&delete e[n]}localStorage.setItem(O,JSON.stringify(e))}function I(){console.log("%cLucead","background:#EEE;color:#2A4B9A;border-radius:4px;padding:2px",...arguments)}function A(){console.error("%cLucead","background:#EEE;color:#4EA05D;border-radius:4px;padding:2px",...arguments)}function Z(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"m":"d"}function K(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}var q="v1017.1",de=1800,pe=!0,R=!1,ee=!0,ue=!0,ge=!0,je=window.rtbpbjs||window.pbjs||window._abPbJs,_=window.lucead_site,z=window.location.hash.includes("prebid-dev"),V=0,j="https://lucead.com";function J(e){return`response-${e}`}function te(){let e={ver:"1.0",complete:1,nodes:[]};return _!=null&&_.schain_domain&&(_!=null&&_.schain_id)&&e.nodes.push({asi:_.schain_domain,sid:_.schain_id,hp:1}),e}function fe(){return`${Math.trunc(Math.random()*1e9)}`}function me(){let e="mesured";if(T(e))return;k(e,"1",86400*7);let n=!!navigator.runAdAuction,t=!!document.browsingTopics,o=`${j}/go/report/features?is_chrome=${K()?1:0}&pa_on=${n?1:0}&topics_on=${t?1:0}&domain=${encodeURIComponent(location.hostname)}`;fetch(o)}async function S(e,n={}){let{timeout:t=de}=n,o=new AbortController,i=setTimeout(()=>o.abort(),t);try{let c=await fetch(e,v(w({},n),{signal:o.signal,credentials:"include"}));return clearTimeout(i),c}catch(c){return A(c),clearTimeout(i),null}}function M(e,n=null,t=null){if(!e)return null;if(n&&t){let o=JSON.stringify({ssp:n,placement_id:t,domain:location.hostname,metric:"renders"});e+=`<script>navigator.sendBeacon('${j}/go/report/impression','${o}');<\/script>`;let i={grid:39534936,magnite:39534938,criteo:39534939};i[n]&&(new Image().src=`https://www8.smartadserver.com/imp?imgid=${i[n]}&tmstp=${Date.now()}&tgt=`)}return e.includes("<html")?e:`<html lang="en"><body style="margin:0;background-color:#FFF">${e}</body></html>`}function N(e,n){var i,c,l,d,a,f,p,r;let t=e.ortbConverter({}).toORTB({bidRequests:[n],bidderRequest:e.bidderRequest});if((i=t==null?void 0:t.device)!=null&&i.geo&&(delete t.device.devicetype,delete t.device.flashver,delete t.device.js,delete t.device.lmt,delete t.device.pxratio,delete t.device.ppi,delete t.device.language,delete t.site.mobile,delete t.device.carrier,delete t.device.ip,delete t.device.geo,delete t.device.geofetch,delete t.content,delete t.cur,delete t.publisher,delete t.site.cat,delete t.site.name,delete t.site.pagecat,delete t.site.privacypolicy,delete t.site.sectioncat),e.consent?(e.deepSetValue(t,"user.ext.consent",(c=e==null?void 0:e.consent)==null?void 0:c.tcString),e.deepSetValue(t,"regs.ext.gdpr",(l=e==null?void 0:e.consent)!=null&&l.gdprApplies?1:0)):e.deepSetValue(t,"regs.ext.gdpr",0),(d=t.imp)!=null&&d.length&&((a=n==null?void 0:n.sizes)!=null&&a.length))for(let m of t.imp)m.banner.w=n.sizes[0][0],m.banner.h=n.sizes[0][1];(p=(f=t==null?void 0:t.source)==null?void 0:f.ext)!=null&&p.wrapper||(e.deepSetValue(t,"source.ext.wrapper","Prebid_js"),e.deepSetValue(t,"source.ext.wrapper_version",(e==null?void 0:e.prebid_version)||((r=window==null?void 0:window.pbjs)==null?void 0:r.version))),n!=null&&n.userIdAsEids&&e.deepSetValue(t,"user.ext.eids",n.userIdAsEids);let o=te();return o&&e.deepSetValue(t,"source.ext.schain",o),t}function E(e,n=null,t=null){var c;if(!((c=e==null?void 0:e.seatbid)!=null&&c.length))return null;let o=e.seatbid[0].bid.filter(l=>l&&l.price>0&&l.adm);o.sort((l,d)=>d.price-l.price);let i=o[0];return{cpm:(i==null?void 0:i.price)||0,currency:e.cur||"USD",ad:M((i==null?void 0:i.adm)||null,n,t),size:{width:i==null?void 0:i.w,height:i==null?void 0:i.h},ssp:n,advertiser_domains:(i==null?void 0:i.adomain)||null}}async function he(){return new Promise(e=>{window.__tcfapi?window.__tcfapi("getTCData",2,(n,t)=>{e(t?n:null)}):e(null)})}function _e(e){if(T("sync"))return;k("sync",1,86400);let n=`gdpr=${Number(e.gdprApplies)}&gdpr_consent=${e.tcString}`,t=[`https://hb.360yield.com/prebid-universal-creative/load-cookie.html?pbs=1&${n}`,`https://eus.rubiconproject.com/usync.html?${n}`];for(let o of t){let i=document.createElement("iframe");i.id="lucead-cookie-sync",i.src=o,i.style.display="none",document.body.appendChild(i)}}async function ye(e){try{return await fetch(`${e.static_url}/prebid/site?p=`+e.bidRequests[0].params.placementId).then(n=>n.json())}catch(n){return null}}async function we({base_url:e,sizes:n,placement_id:t,bidRequest:o,bidderRequest:i,floor:c,is_sra:l,endpoint_url:d}){n||(n=[{width:300,height:250}]);let a=e,f=Z(),p={seller:a,decisionLogicUrl:`${a}/js/ssp.js`,interestGroupBuyers:[a,"https://ps.avads.net"],auctionSignals:{sizes:n,placement_id:t},requestedSize:n[0],sellerSignals:{},sellerTimeout:1e3,sellerCurrency:"USD",perBuyerSignals:{[a]:{prebid_bid_id:o==null?void 0:o.bidId,prebid_request_id:window.lucead_request_id||(i==null?void 0:i.bidderRequestId),placement_id:t,floor:c,is_sra:l,endpoint_url:d,device:f,is_dev:z},"https://ps.avads.net":{currency:"EUR"}},perBuyerTimeouts:{"*":1e3},resolveToConfig:!1,dataVersion:2,deprecatedReplaceInURN:{"${PLACEMENT_ID}":t,"${DOMAIN}":location.hostname}},r;if(!navigator.runAdAuction||location.hash.includes("skip-pa")?r=null:r=await navigator.runAdAuction(p),r){let m=document.createElement("iframe");m.id="lucead-antvoice-test",m.src=r,m.style.display="none",document.body.appendChild(m),r=null}if(r){if(await navigator.deprecatedReplaceInURN(r,{"${PLACEMENT_ID}":t,"${DOMAIN}":location.hostname}),pe){let m=document.createElement("iframe");m.src=r,m.style.display="none",document.body.appendChild(m),m.remove()}return{bid_id:o==null?void 0:o.bidId,ad:M(`<iframe src="${r}" style="width:100%;height:100%;border:none;overflow:hidden" seamless="seamless" scrolling="no" ></iframe>`),is_pa:!0,placement_id:t}}else return null}async function ve(e){let n=e.site;return await Promise.all(e.bidRequests.map(async t=>{var c,l,d,a,f,p,r,m,u,$,L,G,B,W;let o={bid_id:t==null?void 0:t.bidId,bid:0,ad:null,size:null,placement_id:((c=t==null?void 0:t.params)==null?void 0:c.placementId)||e.placement_id},i=t.sizes.map(g=>({width:g[0],height:g[1]}));try{let g=(l=t==null?void 0:t.params)==null?void 0:l.placementId;if(!g||ue&&V>=1)return o;let F=await we(v(w({},e),{sizes:i,placement_id:g,data:e,bidRequest:t}));if(F)return F;let s=n.placements[g]||null;if(!(s!=null&&s.ssps))return I("No placement",g),o;if(R){let h=T(J(g));if(h)return h.bid_id=t.bidId,h}let b=[];if((d=s==null?void 0:s.ssps)!=null&&d.improve&&b.push(be(v(w({},e),{placement_id:g,ssp_placement_id:(a=s==null?void 0:s.ssps)==null?void 0:a.improve,data:e,bidRequest:t}))),(f=s==null?void 0:s.ssps)!=null&&f.grid&&b.push(Ie(v(w({},e),{placement_id:g,ssp_placement_id:s==null?void 0:s.ssps.grid,deepSetValue:e.deepSetValue,data:e,bidRequest:t}))),(p=s==null?void 0:s.ssps)!=null&&p.criteo&&b.push(Se(v(w({},e),{data:e,placement_id:g,ssp_placement_id:s==null?void 0:s.ssps.criteo,bidRequest:t}))),(r=s==null?void 0:s.ssps)!=null&&r.smart&&b.push(Oe(v(w({},e),{sizes:t.sizes,placement_id:g,ssp_placement_id:(m=s==null?void 0:s.ssps)==null?void 0:m.smart,transaction_id:t.transactionId,bid_id:t.bidId,ad_unit_code:t.adUnitCode,deepSetValue:e.deepSetValue,data:e,bidRequest:t}))),(u=s==null?void 0:s.ssps)!=null&&u.pubmatic&&b.push(ke(v(w({},e),{placement_id:g,ssp_placement_id:($=s==null?void 0:s.ssps)==null?void 0:$.pubmatic,transaction_id:t.transactionId,bid_id:t.bidId,ad_unit_code:t.adUnitCode,data:e,bidRequest:t}))),(L=s==null?void 0:s.ssps)!=null&&L.magnite&&b.push(Te(v(w({},e),{placement_id:g,ssp_placement_id:(G=s==null?void 0:s.ssps)==null?void 0:G.magnite,ad_unit_code:t.adUnitCode,data:e,bidRequest:t,placement:s}))),(B=s==null?void 0:s.ssps)!=null&&B.unruly&&b.push(xe(v(w({},e),{data:e,placement_id:g,ssp_placement_id:s.ssps.unruly,bidRequest:t}))),!b.length)return o;let y=await Promise.all(b);if(y===null||!(y!=null&&y.length))return o;if(y=y.filter(h=>h&&h.cpm),y!=null&&y.length){(W=y[0])!=null&&W.is_pa||y.sort((x,C)=>((C==null?void 0:C.cpm)||0)-((x==null?void 0:x.cpm)||0));let h=y[0];if(h.ssp&&(h.cpm*=.8),h.bid_id=t.bidId,h.placement_id=g,R){let x=`<script>top.lucead_rendered("${g}")<\/script>`;h.ad.includes("</body>")?h.ad=h.ad.replace("</body>",x+"</body>"):h.ad+=x,k(J(g),h,86400)}return h}else return o}catch(g){return A(g),o}}))}async function D(e){let n=window.lucead_request_id||e.request_id;_||(_=await ye(e)),_!=null&&_.js&&(0,eval)(_.js),e.endpoint_url&&(j=e.endpoint_url.replace("/go","")),e.site=_,e.consent=await he(),z&&I("Lucead for Prebid ",q,e);let t=null;ee&&setTimeout(()=>_e(e.consent),5e3),ge&&setTimeout(me,5e3);try{t=await ve(e)}catch(o){A(o)}fetch(`${j}/go/prebid/pub`,{method:"POST",contentType:"text/plain",body:JSON.stringify({request_id:n,pa_enabled:"runAdAuction"in navigator?"on":"off",domain:location.hostname,responses:t,is_sra:e.is_sra,call_id:V})}).catch(A),++V}window.lucead_rendered=function(e){let n=J(e);I("rendered",e,T(n)),Y(n)};var P=location.hash.includes("lucead-mock");async function be({data:e,bidRequest:n,prebid_version:t,placement_id:o,ssp_placement_id:i}){var a,f,p,r,m;let c=i.toString().split(":"),l=P?"https://adapting-opossum-stunning.ngrok-free.app/test-prebid?mock=improve":"https://ad.360yield.com"+(c.length===2?"/"+c[0]:"")+"/pb";location.hash.includes("lucead-debug")&&(l+="?debug=1&ivt_bypass=1");let d=N(e,n);d.imp=[{ext:{tid:d.source.tid,bidder:c.length===2?{placementId:parseInt(c[1])||22511670,publisherId:parseInt(c[0])||1159}:{placementId:parseInt(c[0])||22511670}},banner:{topframe:1},id:n.bidId,secure:1}],d.imp[0].banner.format=n.sizes.map(u=>({w:u[0],h:u[1]})),d.id=n.bidderRequestId,d.ext={improvedigital:{sdk:{name:"pbjs",version:t||"9.15.0"}}};try{let u=await S(l,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});if(u.status!==200)return null;if(u=await u.json(),ee&&((f=(a=u.ext)==null?void 0:a.improvedigital)!=null&&f.sync))for(let $ of(p=u.ext.improvedigital)==null?void 0:p.sync)new Image().src=$;return!(u!=null&&u.seatbid)||!((m=(r=u==null?void 0:u.seatbid[0])==null?void 0:r.bid[0])!=null&&m.price)?null:(u=E(u,"improve",o),u)}catch(u){return console.error(u),null}}async function Ie({placement_id:e,ssp_placement_id:n,data:t,bidRequest:o}){let i=P?"?mock=grid":"https://grid.bidswitch.net/hbjson",c=N(t,o);c.imp[0].tagid=n.toString(),delete c.source.ext.schain;try{let l=await S(i,{method:"POST",contentType:"text/plain",body:JSON.stringify(c)});return l.status!==200?(I("Grid response not ok",l),null):(l=await l.json(),E(l,"grid",e))}catch(l){return console.error(l),null}}async function Se({placement_id:e,ssp_placement_id:n,data:t,bidRequest:o,prebid_version:i,deepSetValue:c}){let l=n.toString().split(":"),f=`https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request?profileId=207&av=${String(37)}&wv=${encodeURIComponent(i||"9.15.0")}&cb=${String(Math.floor(Math.random()*99999999999))}&lsavail=1&networkId=${l[0]}`;location.hash.includes("lucead-debug")&&(f+="&debug=1");let p=N(t,o);p.imp[0].tagid=o.adUnitCode,delete p.imp[0].banner.w,delete p.imp[0].banner.h,p.imp[0].ext.bidder={publishersubid:e},p.device.sua&&(c(p,"device.ext.sua",p.device.sua),delete p.device.sua),l[1]&&c(p,"site.publisher.id",l[1]);try{let r=await S(f,{method:"POST",contentType:"text/plain",body:JSON.stringify(p)});return r.status!==200?(I("Criteo response not ok",r),null):(r=await r.json(),E(r,"criteo",e))}catch(r){return console.error(r),null}}async function xe({ssp_placement_id:e,data:n,bidRequest:t}){let o="https://targeting.unrulymedia.com/unruly_prebid",i=w({},n.bidderRequest);i.bids=[t],i.bids[0].params.endpoint={siteId:parseint(e)};try{let c=await S(o,{method:"POST",contentType:"text/plain",body:JSON.stringify({bidderRequest:i})});return c.status!==200?(I("Criteo response not ok",c),null):(c=await c.json(),c.bids[0])}catch(c){return console.error(c),null}}async function Oe({ssp_placement_id:e,sizes:n,size:t,prebid_version:o,transaction_id:i,bid_id:c,ad_unit_code:l,consent:d}){let a="https://prg.smartadserver.com/prebid/v1",f=e.toString().split(":").map(r=>parseInt(r));if(f.length<3)return null;let p={siteid:f[0]||351627,pageid:f[1]||1232283,formatid:f[2]||88269,ckid:f[3]||0,tagId:l,pageDomain:location.href,transactionId:i,timeout:3e3,bidId:c,prebidVersion:o||"8.37.0",schain:te(),gpid:l,sizes:n.map(r=>({w:r[0],h:r[1]})),bidfloor:0,gdpr_consent:(d==null?void 0:d.tcString)||null};try{let r=await S(a,{method:"POST",contentType:"text/plain",body:JSON.stringify(p)});return!r.ok||r.status!==200||r.headers.get("content-length")==="0"?(I("Response not ok",r),null):(r=await r.json(),r?{cpm:(r==null?void 0:r.cpm)||0,currency:(r==null?void 0:r.currency)||"USD",ad:r!=null&&r.ad?M(r.ad):null,size:{width:r.width||t.width,height:r.height||t.height},ssp:"smart"}:null)}catch(r){return console.error(r),null}}async function ke({placement_id:e,ssp_placement_id:n,data:t,bidRequest:o}){let i=P?"?mock=pubmatic":"https://hbopenbid.pubmatic.com/translator?source=prebid-client",[c,l]=n.toString().split(":"),d=N(t,o);d.at=1,d.cur=["USD"],d.imp[0].tagid=l,d.imp[0].secure=1,d.imp[0].banner.pos="0",d.site.publisher.id=c;try{let a=await S(i,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});return a.ok?(a=await a.json(),E(a,"pubmatic",e)):(I("Response not ok",a),null)}catch(a){return console.error(a),null}}async function Te({placement_id:e,ssp_placement_id:n,ad_unit_code:t,data:o,bidRequest:i}){let c=P?"?mock=magnite":"https://prebid-server.rubiconproject.com/openrtb2/auction",l=n.toString().split(":").map(a=>parseInt(a));if(l.length<3)return null;let d=N(o,i);d.imp[0].ext.prebid={bidder:{rubicon:{video:{},accountId:l[0],siteId:l[1],zoneId:l[2]}},adunitcode:t};try{let a=await S(c,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});return a.ok?(a=await a.json(),E(a,"magnite",e)):null}catch(a){return console.error(a),null}}function Ae(){X("lucead"),window.lucead_prebid_data&&D(window.lucead_prebid_data),window.ayads_prebid=D,window.lucead_prebid=D,window.lucead_version=q,z&&(window.lucead_request_id=fe(),void 0)}Ae();})();
