(()=>{var K=Object.defineProperty,R=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var W=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||(t={}))ee.call(t,n)&&W(e,n,t[n]);if(L)for(var n of L(t))ne.call(t,n)&&W(e,n,t[n]);return e},w=(e,t)=>R(e,q(t));function S(){console.log("%cLucead","background:#EEE;color:#2A4B9A;border-radius:4px;padding:2px",...arguments)}function O(){console.error("%cLucead","background:#EEE;color:#4EA05D;border-radius:4px;padding:2px",...arguments)}function F(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"m":"d"}var v="storage";function H(e){v=e}function te(){let e=JSON.parse(localStorage.getItem(v))||{};for(let t in e)if(e.hasOwnProperty(t)){let n=e[t][1]||0;n&&n<U()&&(delete e[t],k(t,null))}return e}function P(e){let t=te();return t[e]&&t[e][0]||null}function k(e,t,n){let r=JSON.parse(localStorage.getItem(v))||{};t?r[e]=[t,n?U()+n:0]:delete r[e],localStorage.setItem(v,JSON.stringify(r)),re()}function Q(e){k(e,null)}function U(){return Math.floor(Date.now()/1e3)}function re(){let e=JSON.parse(localStorage.getItem(v));for(let t in e)if(e.hasOwnProperty(t)){let n=e[t][1]||0;n&&n<U()&&delete e[t]}localStorage.setItem(v,JSON.stringify(e))}var ie="v0924.1",se=1800,ce=!0,X=!0,x=window.rtbpbjs||window.pbjs||window._abPbJs,A,z=window.location.hash.includes("prebid-dev");function j(e){return"response-"+e}function Y(){var t;let e={ver:"1.0",complete:1,nodes:[{asi:A.schain_domain,sid:A.schain_id}]};if(x&&x.getConfig("schain"))for(let n of(t=x==null?void 0:x.getConfig("schain"))==null?void 0:t.nodes)e.nodes.push(n);return e}function Z(){return`${Math.trunc(Math.random()*1e9)}`}window.uniqid=Z;async function b(e,t={}){let{timeout:n=se}=t,r=new AbortController,o=setTimeout(()=>r.abort(),n),d=await fetch(e,w(_({},t),{signal:r.signal,credentials:"include"}));return clearTimeout(o),d}function J(e){return e?e.includes("<html")?e:`<html lang="en"><body style="margin:0;background-color:#FFF">${e}</body></html>`:null}function T(e,t){var r,o,d,c,l,p,a;let n=e.ortbConverter({}).toORTB({bidRequests:[t],bidderRequest:e.bidderRequest});if(e.consent?(e.deepSetValue(n,"user.ext.consent",(r=e==null?void 0:e.consent)==null?void 0:r.tcString),e.deepSetValue(n,"regs.ext.gdpr",(o=e==null?void 0:e.consent)!=null&&o.gdprApplies?1:0)):e.deepSetValue(n,"regs.ext.gdpr",0),(d=n.imp)!=null&&d.length&&((c=t==null?void 0:t.sizes)!=null&&c.length))for(let h of n.imp)h.banner.w=t.sizes[0][0],h.banner.h=t.sizes[0][1];return(p=(l=n==null?void 0:n.source)==null?void 0:l.ext)!=null&&p.wrapper||(e.deepSetValue(n,"source.ext.wrapper","Prebid_js"),e.deepSetValue(n,"source.ext.wrapper_version",(e==null?void 0:e.prebid_version)||((a=window==null?void 0:window.pbjs)==null?void 0:a.version))),t!=null&&t.userIdAsEids&&e.deepSetValue(n,"user.ext.eids",t.userIdAsEids),e.deepSetValue(n,"source.ext.schain",Y()),n}function C(e,t,n=null){var d;if(!((d=e==null?void 0:e.seatbid)!=null&&d.length))return null;let r=e.seatbid[0].bid.filter(c=>c&&c.price>0&&c.adm);r.sort((c,l)=>l.price-c.price);let o=r[0];return{cpm:(o==null?void 0:o.price)||0,currency:e.cur||"USD",ad:J((o==null?void 0:o.adm)||null),size:{width:o==null?void 0:o.w,height:o==null?void 0:o.h},ssp:n,advertiser_domains:(o==null?void 0:o.adomain)||null}}async function ae(){return new Promise(e=>{window.__tcfapi?window.__tcfapi("getTCData",2,(t,n)=>{e(n?t:null)}):e(null)})}async function le(e){try{return await fetch(`${e.static_url}/prebid/site?p=`+e.bidRequests[0].params.placementId).then(t=>t.json())}catch(t){return null}}async function de({base_url:e,sizes:t,placement_id:n,bidRequest:r,bidderRequest:o,floor:d,is_sra:c,endpoint_url:l}){t||(t=[{width:300,height:250}]);let p=e,a=F(),h={seller:p,decisionLogicUrl:`${p}/js/ssp.js`,interestGroupBuyers:[p,"https://ps.avads.net"],auctionSignals:{sizes:t,placement_id:n},requestedSize:t[0],sellerSignals:{},sellerTimeout:1e3,sellerCurrency:"EUR",perBuyerSignals:{[p]:{prebid_bid_id:r==null?void 0:r.bidId,prebid_request_id:window.lucead_request_id||(o==null?void 0:o.bidderRequestId),placement_id:n,floor:d,is_sra:c,endpoint_url:l,device:a,is_dev:z},"https://ps.avads.net":{currency:"EUR"}},perBuyerTimeouts:{"*":1e3},resolveToConfig:!1,dataVersion:2,deprecatedReplaceInURN:{"${PLACEMENT_ID}":n,"${DOMAIN}":location.hostname}},i;if(!navigator.runAdAuction||location.hash.includes("skip-pa")?i=null:i=await navigator.runAdAuction(h),i){let g=document.createElement("iframe");g.src=i,g.style.display="none",document.body.appendChild(g),g.remove(),i=null}if(i){if(await navigator.deprecatedReplaceInURN(i,{"${PLACEMENT_ID}":n,"${DOMAIN}":location.hostname}),ce){let g=document.createElement("iframe");g.src=i,g.style.display="none",document.body.appendChild(g),g.remove()}return{bid_id:r==null?void 0:r.bidId,ad:J(`<iframe src="${i}" style="width:100%;height:100%;border:none;overflow:hidden" seamless="seamless" scrolling="no" ></iframe>`),is_pa:!0,placement_id:n}}else return null}async function pe(e){let t=e.site;return await Promise.all(e.bidRequests.map(async n=>{var d,c,l,p,a,h,i,g,D,M,$,G;let r={bid_id:n==null?void 0:n.bidId,bid:0,ad:null,size:null,placement_id:((d=n==null?void 0:n.params)==null?void 0:d.placementId)||e.placement_id},o=n.sizes.map(f=>({width:f[0],height:f[1]}));try{let f=(c=n==null?void 0:n.params)==null?void 0:c.placementId;if(!f)return r;let B=await de(w(_({},e),{sizes:o,placement_id:f,data:e,bidRequest:n}));if(B)return B;let s=t.placements[f]||null;if(!(s!=null&&s.ssps))return S("No placement",f),r;if(X){let u=P(j(f));if(u)return u.bid_id=n.bidId,u}let y=[];if((l=s==null?void 0:s.ssps)!=null&&l.improve&&y.push(ue(w(_({},e),{placement_id:(p=s==null?void 0:s.ssps)==null?void 0:p.improve,data:e,bidRequest:n}))),(a=s==null?void 0:s.ssps)!=null&&a.grid&&y.push(fe(w(_({},e),{placement_id:s==null?void 0:s.ssps.grid,deepSetValue:e.deepSetValue,data:e,bidRequest:n}))),(h=s==null?void 0:s.ssps)!=null&&h.smart&&y.push(ge(w(_({},e),{sizes:n.sizes,placement_id:(i=s==null?void 0:s.ssps)==null?void 0:i.smart,transaction_id:n.transactionId,bid_id:n.bidId,ad_unit_code:n.adUnitCode,deepSetValue:e.deepSetValue,data:e,bidRequest:n}))),(g=s==null?void 0:s.ssps)!=null&&g.pubmatic&&y.push(me(w(_({},e),{placement_id:(D=s==null?void 0:s.ssps)==null?void 0:D.pubmatic,transaction_id:n.transactionId,bid_id:n.bidId,ad_unit_code:n.adUnitCode,data:e,bidRequest:n}))),(M=s==null?void 0:s.ssps)!=null&&M.magnite&&y.push(he(w(_({},e),{placement_id:($=s==null?void 0:s.ssps)==null?void 0:$.magnite,ad_unit_code:n.adUnitCode,data:e,bidRequest:n,placement:s}))),!y.length)return r;let m=await Promise.all(y);if(m===null||!(m!=null&&m.length))return r;if(m=m.filter(u=>u&&u.cpm),m!=null&&m.length){(G=m[0])!=null&&G.is_pa||m.sort((I,E)=>((E==null?void 0:E.cpm)||0)-((I==null?void 0:I.cpm)||0));let u=m[0];if(u.ssp&&(u.cpm*=.8),u.bid_id=n.bidId,u.placement_id=f,X){let I=`<script>top.lucead_rendered("${f}")<\/script>`;u.ad.includes("</body>")?u.ad=u.ad.replace("</body>",I+"</body>"):u.ad+=I,k(j(f),u,86400)}return u}else return r}catch(f){return O(f),r}}))}async function V(e){let t=e.endpoint_url.replace("/go",""),n=window.lucead_request_id||e.request_id;A=window.lucead_site||await le(e),e.site=A,e.consent=await ae(),z&&S("Lucead for Prebid ",ie,e);let r=null;try{r=await pe(e)}catch(o){O(o)}fetch(`${t}/go/prebid/pub`,{method:"POST",contentType:"text/plain",body:JSON.stringify({request_id:n,pa_enabled:"runAdAuction"in navigator?"on":"off",domain:location.hostname,responses:r,is_sra:e.is_sra})}).catch(O)}window.lucead_rendered=function(e){let t=j(e);S("rendered",e,P(t)),Q(t)};var N=location.hash.includes("mock");async function ue({data:e,bidRequest:t,prebid_version:n,placement_id:r}){var l,p;let o=N?"?mock=improve":"https://ad.360yield.com/pb",d=T(e,t),c=r.toString().split(":");d.imp=[{ext:{tid:d.source.tid,bidder:c.length>1?{publisherId:parseInt(c[0])||1159,placementId:parseInt(c[1])||22511670}:{placementId:parseInt(c[0])||22511670}},banner:{topframe:1},id:t.bidId,secure:1}],d.id=t.bidderRequestId,d.ext={improvedigital:{sdk:{name:"pbjs",version:n||"8.55.0"}}},delete d.source.ext;try{let a=await b(o,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});return a.status!==200||(a=await a.json(),!((p=(l=a==null?void 0:a.seatbid[0])==null?void 0:l.bid[0])!=null&&p.price))?null:C(a,size,"improve")}catch(a){return null}}async function fe({size:e,placement_id:t,data:n,bidRequest:r}){let o=N?"?mock=grid":"https://grid.bidswitch.net/hbjson",d=T(n,r);d.imp[0].tagid=t.toString();try{let c=await b(o,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});return c.status!==200?(S("Grid response not ok",c),null):(c=await c.json(),C(c,e,"grid"))}catch(c){return null}}async function ge({placement_id:e,sizes:t,size:n,prebid_version:r,transaction_id:o,bid_id:d,ad_unit_code:c,consent:l}){let p="https://prg.smartadserver.com/prebid/v1",a=e.toString().split(":").map(i=>parseInt(i));if(a.length<3)return null;let h={siteid:a[0]||351627,pageid:a[1]||1232283,formatid:a[2]||88269,ckid:a[3]||0,tagId:c,pageDomain:location.href,transactionId:o,timeout:3e3,bidId:d,prebidVersion:r||"8.37.0",schain:Y(),gpid:c,sizes:t.map(i=>({w:i[0],h:i[1]})),bidfloor:0,gdpr_consent:(l==null?void 0:l.tcString)||null};try{let i=await b(p,{method:"POST",contentType:"text/plain",body:JSON.stringify(h)});return!i.ok||i.status!==200||i.headers.get("content-length")==="0"?(S("Response not ok",i),null):(i=await i.json(),i?{cpm:(i==null?void 0:i.cpm)||0,currency:(i==null?void 0:i.currency)||"USD",ad:i!=null&&i.ad?J(i.ad):null,size:{width:i.width||n.width,height:i.height||n.height},ssp:"smart"}:null)}catch(i){return null}}async function me({placement_id:e,size:t,data:n,bidRequest:r}){let o=N?"?mock=pubmatic":"https://hbopenbid.pubmatic.com/translator?source=prebid-client",[d,c]=e.toString().split(":"),l=T(n,r);l.at=1,l.cur=["USD"],l.imp[0].tagid=c,l.imp[0].secure=1,l.imp[0].banner.pos="0",l.site.publisher.id=d;try{let p=await b(o,{method:"POST",contentType:"text/plain",body:JSON.stringify(l)});return p.ok?(p=await p.json(),C(p,t,"pubmatic")):(S("Response not ok",p),null)}catch(p){return null}}async function he({placement_id:e,size:t,ad_unit_code:n,data:r,bidRequest:o,placement:d}){let c=N?"?mock=magnite":"https://prebid-server.rubiconproject.com/openrtb2/auction",l=e.toString().split(":").map(a=>parseInt(a));if(l.length<3)return null;let p=T(r,o);p.imp[0].ext.prebid={bidder:{rubicon:{video:{},accountId:l[0],siteId:l[1],zoneId:l[2]}},adunitcode:n};try{let a=await b(c,{method:"POST",contentType:"text/plain",body:JSON.stringify(p)});return a.ok?(a=await a.json(),C(a,t,"magnite",d)):null}catch(a){return null}}function _e(){H("lucead"),window.lucead_prebid_data?V(window.lucead_prebid_data):(window.ayads_prebid=V,window.lucead_prebid=V),z&&(window.lucead_request_id=Z(),void 0)}location.hostname.includes("24h.com.vn")&&_e();})();
