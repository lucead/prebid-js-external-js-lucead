(()=>{var G=Object.defineProperty,D=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var V=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&V(e,r,t[r]);if(P)for(var r of P(t))B.call(t,r)&&V(e,r,t[r]);return e},h=(e,t)=>D(e,W(t));function f(){console.log("%c.io","background:#444;color:#fd890d;border-radius:4px;padding:2px",...arguments)}function A(){let e=["A7NuR1g6wYzd9WyYOzQ+OGtHunaTZ4cFvdcU8i8AMW67fOhUNyV65oDgGd+tP/6EfIxYbe/faGGUkeQ5Mhh3WwAAAABzeyJvcmlnaW4iOiJodHRwczovL2F5YWRzLmlvOjQ0MyIsImZlYXR1cmUiOiJGbGVkZ2VCaWRkaW5nQW5kQXVjdGlvblNlcnZlciIsImV4cGlyeSI6MTcxOTM1OTk5OSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="];for(let t of e){let r=document.createElement("meta");r.httpEquiv="origin-trial",r.content=t,document.head.appendChild(r),f("Origin trial added",$(t))}}function E(e){return new Uint8Array([...atob(e)].map(t=>t.charCodeAt(0)))}function $(e){let t=E(e),r=new DataView(t.buffer),s=r.getUint8(),o=t.slice(1,65),n=r.getUint32(65,!1);return{payload:JSON.parse(new TextDecoder().decode(t.slice(69,69+n))),version:s,length:n,signature:o}}A();var F=1e3;async function y(e,t={}){let{timeout:r=F}=t,s=new AbortController,o=setTimeout(()=>s.abort(),r),n=await fetch(e,h(g({},t),{signal:s.signal}));return clearTimeout(o),n}function O(e){return e?e.includes("<html")?e:`<html lang="en"><body style="margin:0;background-color:#FFF">${e}</body></html>`:null}function k(e,t,r=null){var n;if(!((n=e==null?void 0:e.seatbid)!=null&&n.length))return null;let s=e.seatbid[0].bid.filter(i=>i&&i.price>0&&i.adm&&i.w===t.width&&i.h===t.height);s.sort((i,a)=>a.price-i.price);let o=s[0];return{cpm:(o==null?void 0:o.price)||0,currency:"USD",ad:O((o==null?void 0:o.adm)||null),size:{width:(o==null?void 0:o.w)||t.width,height:(o==null?void 0:o.h)||t.height},ssp:r}}async function H(){return new Promise(e=>{window.__tcfapi?window.__tcfapi("getTCData",2,(t,r)=>{e(r?t:null)}):e(null)})}async function M(e){return y(`${e.static_url}/placements/ssps_params?ids=`+e.bidRequests.map(t=>t==null?void 0:t.params.placementId).join(",")).then(t=>t.json())}async function Q({base_url:e,size:t,placement_id:r,bidRequest:s,bidderRequest:o}){e||(e="https://lucead.com");let n=e.endsWith("lucead.com")?"https://ayads.io":e,i={seller:n,decisionLogicUrl:`${n}/js/ssp.js`,interestGroupBuyers:[n],auctionSignals:{size:t,placement_id:r},sellerSignals:{},sellerTimeout:1e3,sellerCurrency:"EUR",perBuyerSignals:{[n]:{prebid_bid_id:s.bidId,prebid_request_id:o.bidderRequestId}},perBuyerTimeouts:{"*":1e3},resolveToConfig:!1,dataVersion:2},a;if(!navigator.runAdAuction||location.hash.includes("skip-pa")?a=null:a=await navigator.runAdAuction(i),f("Protected audience ad",a),a){let c=document.createElement("iframe");return c.src=a,c.style.display="none",document.body.appendChild(c),c.remove(),{bid_id:s.bidId,ad:O(`<iframe src="${a}" style="width:${t.width}px;height:${t.height}px;border:none" seamless ></iframe>`),size:t,is_pa:!0}}else return null}async function X(e){f("Prebid companion",e);let t=e.endpoint_url,r=e.request_id,[s,o]=await Promise.all([M(e),H()]);e.consent=o;let n=await Promise.all(e.bidRequests.map(async i=>{var m,b,l,v,x,T,U,C,j;let a={bid_id:i.bidId,bid:0,ad:null,size:null};if(((m=i==null?void 0:i.params)==null?void 0:m.enableContextual)===!1)return a;let c={width:i.sizes[0][0]||300,height:i.sizes[0][1]||250};try{let d=(b=i==null?void 0:i.params)==null?void 0:b.placementId,S=()=>{var w,J;let p=e.ortbConverter({}).toORTB({bidRequests:[i],bidderRequest:e.bidderRequest});return e.consent&&e.deepSetValue&&(e.deepSetValue(p,"user.ext.consent",(w=e==null?void 0:e.consent)==null?void 0:w.tcString),e.deepSetValue(p,"regs.ext.gdpr",(J=e==null?void 0:e.consent)!=null&&J.gdprApplies?1:0)),p};if(!d)return a;let N=await Q(h(g({},e),{bidRequest:i,size:c,placement_id:d}));if(N)return N;let _=[];if((l=s[d])!=null&&l.improve&&_.push(Y(h(g({},e),{size:c,get_ortb_data:S,placement_id:s[d].improve}))),(v=s[d])!=null&&v.grid&&_.push(Z(h(g({},e),{size:c,get_ortb_data:S,placement_id:s[d].grid,deepSetValue:e.deepSetValue}))),(x=s[d])!=null&&x.smart&&_.push(L(h(g({},e),{sizes:i.sizes,size:c,placement_id:s[d].smart,transaction_id:i.transactionId,bid_id:i.bidId,ad_unit_code:i.adUnitCode,deepSetValue:e.deepSetValue}))),(T=s[d])!=null&&T.pubmatic&&_.push(K(h(g({},e),{size:c,get_ortb_data:S,placement_id:s[d].pubmatic,transaction_id:i.transactionId,bid_id:i.bidId,ad_unit_code:i.adUnitCode}))),(U=s[d])!=null&&U.magnite&&_.push(R(h(g({},e),{size:c,get_ortb_data:S,placement_id:s[d].magnite,ad_unit_code:i.adUnitCode}))),!_.length)return a;let u=await Promise.all(_);if(u===null)return a;if(f("Bids",u),u=u.filter(p=>p&&p.cpm),u.length&&!((C=u[0])!=null&&C.is_pa)&&u.sort((p,w)=>((w==null?void 0:w.cpm)||0)-((p==null?void 0:p.cpm)||0)),u.length&&((j=u[0])==null?void 0:j.cpm)>0){let p=u[0];return p.bid_id=i.bidId,p.size=c,p}else return a}catch(d){return console.error(d),a}}));y(`${t}/prebid/pub`,{method:"POST",contentType:"text/plain",body:JSON.stringify({request_id:r,responses:n})}).catch(console.error)}var I=location.hash.includes("mock");async function Y({prebid_version:e,size:t,placement_id:r,get_ortb_data:s}){var i,a;let o=I?"?mock=improve":"https://ad.360yield.com/pb",n=s();n.imp[0].ext.bidder={placementId:r||22511670},n.ext={improvedigital:{sdk:{name:"pbjs",version:e||"8.32.0"}}};try{let c=await y(o,{method:"POST",contentType:"text/plain",body:JSON.stringify(n)});return c.status!==200||(c=await c.json(),!((a=(i=c==null?void 0:c.seatbid[0])==null?void 0:i.bid[0])!=null&&a.price))?null:k(c,t,"improve")}catch(c){return null}}async function Z({size:e,placement_id:t,get_ortb_data:r}){let s=I?"?mock=grid":"https://grid.bidswitch.net/hbjson",o=r();o.imp[0].tagid=t.toString();try{let n=await y(s,{method:"POST",contentType:"text/plain",body:JSON.stringify(o)});return n.status!==200?(f("Grid response not ok",n),null):(n=await n.json(),k(n,e,"grid"))}catch(n){return null}}async function L({placement_id:e,sizes:t,size:r,prebid_version:s,transaction_id:o,bid_id:n,ad_unit_code:i,consent:a}){let c="https://prg.smartadserver.com/prebid/v1",m=e.toString().split(":").map(l=>parseInt(l));if(m.length<3)return null;let b={siteid:m[0]||351627,pageid:m[1]||1232283,formatid:m[2]||88269,ckid:m[3]||0,tagId:i,pageDomain:location.href,transactionId:o,timeout:3e3,bidId:n,prebidVersion:s||"8.37.0",schain:pbjs.getConfig("schain"),gpid:i,sizes:t.map(l=>({w:l[0],h:l[1]})),bidfloor:0,gdpr_consent:(a==null?void 0:a.tcString)||null};try{let l=await y(c,{method:"POST",contentType:"text/plain",body:JSON.stringify(b)});return!l.ok||l.status!==200||l.headers.get("content-length")==="0"?(f("Response not ok",l),null):(l=await l.json(),l?{cpm:(l==null?void 0:l.cpm)||0,currency:(l==null?void 0:l.currency)||"USD",ad:l!=null&&l.ad?O(l.ad):null,size:{width:l.width||r.width,height:l.height||r.height},ssp:"smart"}:null)}catch(l){return null}}async function K({placement_id:e,size:t,get_ortb_data:r}){let s=I?"?mock=pubmatic":"https://hbopenbid.pubmatic.com/translator?source=prebid-client",o=r();o.at=1,o.cur=["USD","EUR"],o.imp[0].tagid=e.toString();try{let n=await y(s,{method:"POST",contentType:"text/plain",body:JSON.stringify(o)});return!n.ok||n.status!==200?(f("Response not ok",n),null):(n=await n.json(),k(n,t,"pubmatic"))}catch(n){return null}}async function R({placement_id:e,size:t,ad_unit_code:r,get_ortb_data:s}){let o=I?"?mock=magnite":"https://prebid-server.rubiconproject.com/openrtb2/auction",n=e.toString().split(":").map(a=>parseInt(a));if(n.length<3)return null;let i=s();i.imp[0].ext.prebid={bidder:{rubicon:{video:{},accountId:n[0],siteId:n[1],zoneId:n[2]}},adunitcode:r};try{let a=await y(o,{method:"POST",contentType:"text/plain",body:JSON.stringify(i)});return a.ok?(a=await a.json(),k(a,t,"magnite")):null}catch(a){return null}}window.ayads_prebid=X;window.ayads_prebid_data&&(window.ayads_prebid(window.ayads_prebid_data),delete window.ayads_prebid_data);})();
