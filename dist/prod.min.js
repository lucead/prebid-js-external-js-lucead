(()=>{var se=Object.defineProperty,ce=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var X=(e,n,t)=>n in e?se(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,D=(e,n)=>{for(var t in n||(n={}))le.call(n,t)&&X(e,t,n[t]);if(Q)for(var t of Q(n))de.call(n,t)&&X(e,t,n[t]);return e},V=(e,n)=>ce(e,ae(n));var A="storage";function Y(e){A=e}function pe(){let e=JSON.parse(localStorage.getItem(A))||{};for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<M()&&(delete e[n],I(n,null))}return e}function x(e){let n=pe();return n[e]&&n[e][0]||null}function I(e,n,t){let r=JSON.parse(localStorage.getItem(A))||{};n?r[e]=[n,t?M()+t:0]:delete r[e],localStorage.setItem(A,JSON.stringify(r)),ue()}function Z(e){I(e,null)}function M(){return Math.floor(Date.now()/1e3)}function ue(){let e=JSON.parse(localStorage.getItem(A));for(let n in e)if(e.hasOwnProperty(n)){let t=e[n][1]||0;t&&t<M()&&delete e[n]}localStorage.setItem(A,JSON.stringify(e))}function S(){console.log("%cLucead","background:#EEE;color:#2A4B9A;border-radius:4px;padding:2px",...arguments)}function j(){console.error("%cLucead","background:#EEE;color:#4EA05D;border-radius:4px;padding:2px",...arguments)}function K(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"m":"d"}function R(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function q(){let n=location.hash.replace("#","").split("&"),t={},r="lucead-";for(let o of n){let[i,a]=o.split("=");t[i.replace(r,"")]=a}return t}function ee(e){return new Promise((n,t)=>{let r=document.createElement("script");r.src=e,r.onload=n,r.onerror=t,document.head.appendChild(r)})}var ne="v1126.1",oe=1600,fe=!0,L=!1,re=!0,me=!0,he=!1,Me=window.rtbpbjs||window.pbjs||window._abPbJs,h=window.lucead_site,U=window.location.hash.includes("prebid-dev"),te=0,J="https://lucead.com",_e="https://lucead.com",ye="https://s.lucead.com",B=q();function ie(){let e={ver:"1.0",complete:1,nodes:[]};return h!=null&&h.schain_domain&&(h!=null&&h.schain_id)&&e.nodes.push({asi:h.schain_domain,sid:h.schain_id,hp:1}),e}function we(){return`${Math.trunc(Math.random()*1e9)}`}async function be(e){if(x("country"))return x("country");try{let n=await fetch(`${e}/go/country`).then(t=>t.text());return I("country",n,86400*30),n}catch(n){return null}}function ve(){let e="mesured";if(x(e))return;I(e,"1",86400*7);let n=!!navigator.runAdAuction,t=!!document.browsingTopics,r=`${J}/go/report/features?is_chrome=${R()?1:0}&pa_on=${n?1:0}&topics_on=${t?1:0}`;fetch(r)}async function O(e,n={}){let t=new AbortController,r=setTimeout(()=>t.abort(),oe);try{let o=await fetch(e,V(D({},n),{signal:t.signal,credentials:"include"}));return clearTimeout(r),o}catch(o){return clearTimeout(r),null}}function W(e,n=null,t=null){if(!e)return null;if(n&&t){let r=JSON.stringify({ssp:n,placement_id:t,domain:location.hostname,metric:"renders"});e+=`<script>navigator.sendBeacon('${J}/go/report/event','${r}');<\/script>`;let o={grid:39534936,magnite:39534938,criteo:39534939};o[n]&&(new Image().src=`https://www8.smartadserver.com/imp?imgid=${o[n]}&tmstp=${Date.now()}&tgt=`)}return e.includes("<html")?e:`<html lang="en"><body style="margin:0;background-color:#FFF">${e}</body></html>`}function N(e,n){var o,i,a,c,f,d,u,s,l,_;let t=e.ortbConverter({}).toORTB({bidRequests:[n],bidderRequest:e.bidderRequest});if((o=t==null?void 0:t.device)!=null&&o.geo&&(delete t.device.devicetype,delete t.device.flashver,delete t.device.js,delete t.device.lmt,delete t.device.pxratio,delete t.device.ppi,delete t.device.language,delete t.site.mobile,delete t.device.carrier,delete t.device.ip,delete t.device.geo,delete t.device.geofetch,delete t.content,delete t.cur,delete t.publisher,delete t.site.cat,delete t.site.name,delete t.site.pagecat,delete t.site.privacypolicy,delete t.site.sectioncat),e.consent?(e.deepSetValue(t,"user.ext.consent",(i=e==null?void 0:e.consent)==null?void 0:i.tcString),e.deepSetValue(t,"regs.ext.gdpr",(a=e==null?void 0:e.consent)!=null&&a.gdprApplies?1:0)):e.deepSetValue(t,"regs.ext.gdpr",0),(c=t.imp)!=null&&c.length&&((f=n==null?void 0:n.sizes)!=null&&f.length)){for(let y of t.imp)if(y.banner.w=n.sizes[0][0],y.banner.h=n.sizes[0][1],h.id&&((d=n==null?void 0:n.params)!=null&&d.placementId)){let T=location.hostname+"_"+((u=n==null?void 0:n.params)==null?void 0:u.placementId);y.tagid=T,e.deepSetValue(y,"ext.gpid",T)}}(l=(s=t==null?void 0:t.source)==null?void 0:s.ext)!=null&&l.wrapper||(e.deepSetValue(t,"source.ext.wrapper","Prebid_js"),e.deepSetValue(t,"source.ext.wrapper_version",(e==null?void 0:e.prebid_version)||((_=window==null?void 0:window.pbjs)==null?void 0:_.version))),n!=null&&n.userIdAsEids&&e.deepSetValue(t,"user.ext.eids",n.userIdAsEids);let r=ie();return r&&e.deepSetValue(t,"source.ext.schain",r),t}function E(e,n=null,t=null){var i;if(!((i=e==null?void 0:e.seatbid)!=null&&i.length))return null;let r=e.seatbid[0].bid.filter(a=>a&&a.price>0&&a.adm);r.sort((a,c)=>c.price-a.price);let o=r[0];return{cpm:(o==null?void 0:o.price)||0,currency:e.cur||"USD",ad:W((o==null?void 0:o.adm)||null,n,t),size:{width:o==null?void 0:o.w,height:o==null?void 0:o.h},ssp:n,advertiser_domains:(o==null?void 0:o.adomain)||null}}async function xe(){return new Promise(e=>{window.__tcfapi?window.__tcfapi("getTCData",2,(n,t)=>{e(t?n:null)}):e(null)})}function Ie(e){if(x("sync"))return;I("sync",1,86400);let n=`gdpr=${Number(e==null?void 0:e.gdprApplies)}&gdpr_consent=${e==null?void 0:e.tcString}`,t=[`https://hb.360yield.com/prebid-universal-creative/load-cookie.html?pbs=1&${n}`,`https://eus.rubiconproject.com/usync.html?${n}`];for(let r of t){let o=document.createElement("iframe");o.id="lucead-cookie-sync",o.src=r,o.style.display="none",document.body.appendChild(o)}}async function Se(e){try{return await fetch(`${e.static_url}/prebid/site?p=`+e.bidRequests[0].params.placementId).then(n=>n.json())}catch(n){return null}}async function Oe({base_url:e,sizes:n,placement_id:t,bidRequest:r,bidderRequest:o,floor:i,is_sra:a,endpoint_url:c}){n||(n=[{width:300,height:250}]);let f=e,d=K(),u=new AbortController,s=setTimeout(()=>u.abort(),oe),l={seller:f,signal:U?null:u.signal,topWindowHostname:location.hostname,decisionLogicUrl:`${f}/js/ssp.js`,interestGroupBuyers:[f,"https://ps.avads.net"],auctionSignals:{sizes:n,placement_id:t,page:location.href,floor:0,floor_currency:"USD",country:await be(c)},requestedSize:n[0],sellerSignals:{},sellerCurrency:"USD",perBuyerSignals:{[f]:{prebid_bid_id:r==null?void 0:r.bidId,prebid_request_id:window.lucead_request_id||(o==null?void 0:o.bidderRequestId),placement_id:t,floor:i,is_sra:a,endpoint_url:c,device:d,is_dev:U},"https://ps.avads.net":{currency:"EUR"}},resolveToConfig:!1,dataVersion:2,deprecatedReplaceInURN:{"${PLACEMENT_ID}":t,"${DOMAIN}":location.hostname}},_;if(!navigator.runAdAuction||location.hash.includes("skip-pa")?_=null:_=await navigator.runAdAuction(l),clearTimeout(s),_){if(await navigator.deprecatedReplaceInURN(_,{"${PLACEMENT_ID}":t,"${DOMAIN}":location.hostname}),fe){let y=document.createElement("iframe");y.src=_,y.style.display="none",document.body.appendChild(y),y.remove()}return{bid_id:r==null?void 0:r.bidId,ad:W(`<iframe src="${_}" style="width:100%;height:100%;border:none;overflow:hidden" seamless="seamless" scrolling="no" ></iframe>`),is_pa:!0,placement_id:t}}else return null}var G=null;async function ke(e){let n=e.site;return await Promise.all(e.bidRequests.map(async(t,r)=>{var a,c,f,d,u,s,l,_,y,T,F,H;let o={bid_id:t==null?void 0:t.bidId,bid:0,ad:null,size:null,placement_id:((a=t==null?void 0:t.params)==null?void 0:a.placementId)||e.placement_id},i=t.sizes.map(b=>({width:b[0],height:b[1]}));try{let b=(c=t==null?void 0:t.params)==null?void 0:c.placementId,$=L?`cache-${b}-${r}-`+i.map(g=>`${g.width}x${g.height}`).join("-"):null;if(!b)return o;if(me){if(!G)G=Date.now();else if(G<Date.now()-3e4)return o}if(L&&$){let g=x($);if(g)return g.bid_id=t.bidId,g}let p=n.placements[b]||null,v=V(D({},e),{data:e,placement:p,placement_id:b,bidRequest:t,bid_request:t}),w=[];if(w.push(Oe(v)),(f=p==null?void 0:p.ssps)!=null&&f.improve&&w.push(Ae(v)),(d=p==null?void 0:p.ssps)!=null&&d.grid&&w.push(Te(v)),(u=p==null?void 0:p.ssps)!=null&&u.criteo&&w.push($e(v)),(s=p==null?void 0:p.ssps)!=null&&s.smart&&w.push(Ee(v)),(l=p==null?void 0:p.ssps)!=null&&l.pubmatic&&w.push(Pe(v)),(_=p==null?void 0:p.ssps)!=null&&_.magnite&&w.push(De(v)),(y=p==null?void 0:p.ssps)!=null&&y.unruly&&w.push(je(v)),(T=p==null?void 0:p.ssps)!=null&&T.amazon&&w.push(Ne(v)),!w.length)return o;let m=await Promise.all(w);if(m===null||!(m!=null&&m.length))return o;if(m!=null&&m.length&&((F=m[0])!=null&&F.is_pa))return m[0];if(m=m.filter(g=>g&&g.cpm),m!=null&&m.length){(H=m[0])!=null&&H.is_pa||m.sort((k,z)=>((z==null?void 0:z.cpm)||0)-((k==null?void 0:k.cpm)||0));let g=m[0];if(g.ssp&&(g.cpm*=.68),g.bid_id=t.bidId,g.placement_id=b,L&&$){let k=`<script class="lucead-rendered">top.lucead_rendered("${$}");<\/script>`;g.ad.includes("</body>")?g.ad=g.ad.replace("</body>",k+"</body>"):g.ad+=k,I($,g,60)}return g}else return o}catch(b){return j(b),o}}))}async function C(e){let n=window.lucead_request_id||e.request_id;h||(h=await Se(e)),h!=null&&h.js&&(0,eval)(h.js),e.endpoint_url&&(J=e.endpoint_url.replace("/go","")),e.base_url&&(_e=e.base_url),Ce(e),e.site=h,e.consent=await xe(),U&&S("Lucead for Prebid ",ne,e);let t=null;re&&setTimeout(()=>Ie(e.consent),5e3),he&&setTimeout(ve,5e3),console.log("started");let r=Date.now();try{t=await ke(e)}catch(o){j(o)}fetch(`${J}/go/prebid/pub`,{method:"POST",contentType:"text/plain",body:JSON.stringify({request_id:n,pa_enabled:"runAdAuction"in navigator?"on":"off",domain:location.hostname,responses:t,is_sra:e.is_sra,request_key:te,duration:Date.now()-r})}).catch(j),++te}window.lucead_rendered=function(e){S("rendered",x(e)),Z(e)};function P(e,n){return B.mock===e?`https://adapting-opossum-stunning.ngrok-free.app/test-prebid?mock=${e}`:n}async function Ae({placement:e,data:n,bidRequest:t,prebid_version:r}){var c,f,d,u,s;let o=e.ssps.improve.ssp_placement_id.toString().split(":"),i=P("improve","https://ad.360yield.com"+(o.length===2?"/"+o[0]:"")+"/pb");B.debug&&(i+="?debug=1&ivt_bypass=1");let a=N(n,t);a.imp=[{ext:{tid:a.source.tid,bidder:o.length===2?{placementId:parseInt(o[1])||22511670,publisherId:parseInt(o[0])||1159}:{placementId:parseInt(o[0])||22511670}},banner:{topframe:1},id:t.bidId,secure:1}],a.imp[0].banner.format=t.sizes.map(l=>({w:l[0],h:l[1]})),a.id=t.bidderRequestId,a.ext={improvedigital:{sdk:{name:"pbjs",version:r||"9.15.0"}}};try{let l=await O(i,{method:"POST",contentType:"text/plain",body:JSON.stringify(a)});if((l==null?void 0:l.status)!==200)return null;if(l=await l.json(),re&&((f=(c=l.ext)==null?void 0:c.improvedigital)!=null&&f.sync))for(let _ of(d=l.ext.improvedigital)==null?void 0:d.sync)new Image().src=_;return!(l!=null&&l.seatbid)||!((s=(u=l==null?void 0:l.seatbid[0])==null?void 0:u.bid[0])!=null&&s.price)?null:(l=E(l,"improve",e.id),l)}catch(l){return j(l),null}}async function Te({placement:e,data:n,bidRequest:t}){let r=P("grid","https://grid.bidswitch.net/hbjson"),o=N(n,t);o.imp[0].tagid=e.ssps.grid.ssp_placement_id.toString(),delete o.source.ext.schain;try{let i=await O(r,{method:"POST",contentType:"text/plain",body:JSON.stringify(o)});return(i==null?void 0:i.status)!==200?(S("Grid response not ok",i),null):(i=await i.json(),E(i,"grid",e.id))}catch(i){return console.error(i),null}}async function $e({placement:e,data:n,bidRequest:t,prebid_version:r,deepSetValue:o}){let i=e.ssps.criteo.ssp_placement_id.toString().split(":"),f=P("criteo",`https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request?profileId=207&av=${String(37)}&wv=${encodeURIComponent(r||"9.15.0")}&cb=${String(Math.floor(Math.random()*99999999999))}&lsavail=1&networkId=${i[0]}`);B.debug&&(f+="&debug=1");let d=N(n,t);delete d.imp[0].banner.w,delete d.imp[0].banner.h,d.imp[0].ext.bidder={publishersubid:e.id,uid:i[2]||""},e.ssps.criteo.floor&&(d.imp[0].bidfloor=e.ssps.criteo.floor,d.imp[0].bidfloorcur="USD"),i[1]&&o(d,"site.publisher.id",i[1]),o(d,"publisher.url",location.href);try{let u=await O(f,{method:"POST",contentType:"text/plain",body:JSON.stringify(d)});return(u==null?void 0:u.status)!==200?null:(u=await u.json(),E(u,"criteo",e.id))}catch(u){return console.error(u),null}}async function je({placement:e,data:n,bidRequest:t}){let r="https://targeting.unrulymedia.com/unruly_prebid",o=D({},n.bidderRequest);o.bids=[t],o.bids[0].params.endpoint={siteId:parseint(e.ssps.unruly.ssp_placement_id)};try{let i=await O(r,{method:"POST",contentType:"text/plain",body:JSON.stringify({bidderRequest:o})});return(i==null?void 0:i.status)!==200?(S("Criteo response not ok",i),null):(i=await i.json(),i.bids[0])}catch(i){return console.error(i),null}}async function Ne({placement:e}){let n={src:600,u:"https://adapting-opossum-stunning.ngrok-free.app/test-amazon.php",pid:"O4mON3Hn3L4Js",cb:0,ws:"1792x481",v:"24.910.1025",t:"2000",slots:'[{"sd":"test-slot-id","s":["300x250","300x600"],"sn":"test-slot-name"}]',pubid:"6bbeeb6f-714d-47ea-8434-a3c90bec82f4",gdprl:'{"status":"no-cmp"}'};console.log(e);let t="https://aax.amazon-adsystem.com/e/dtb/bid?".Object.keys(n).map(o=>`${o}=${encodeURIComponent(n[o])}`).join("&"),r=await fetch(t).then(o=>o.text()).then(o=>console.log(o));console.log(r)}async function Ee({placement:e,sizes:n,size:t,prebid_version:r,transaction_id:o,bid_id:i,ad_unit_code:a,consent:c}){let f="https://prg.smartadserver.com/prebid/v1",d=e.ssps.smart.ssp_placement_id.toString().split(":").map(s=>parseInt(s));if(d.length<3)return null;let u={siteid:d[0]||351627,pageid:d[1]||1232283,formatid:d[2]||88269,ckid:d[3]||0,tagId:a,pageDomain:location.href,transactionId:o,timeout:3e3,bidId:i,prebidVersion:r||"8.37.0",schain:ie(),gpid:a,sizes:n.map(s=>({w:s[0],h:s[1]})),bidfloor:0,gdpr_consent:(c==null?void 0:c.tcString)||null};try{let s=await O(f,{method:"POST",contentType:"text/plain",body:JSON.stringify(u)});return!(s!=null&&s.ok)||(s==null?void 0:s.status)!==200||s.headers.get("content-length")==="0"?(S("Response not ok",s),null):(s=await s.json(),s?{cpm:(s==null?void 0:s.cpm)||0,currency:(s==null?void 0:s.currency)||"USD",ad:s!=null&&s.ad?W(s.ad):null,size:{width:s.width||t.width,height:s.height||t.height},ssp:"smart"}:null)}catch(s){return console.error(s),null}}async function Pe({placement:e,data:n,bidRequest:t}){let r=P("pubmatic","https://hbopenbid.pubmatic.com/translator?source=prebid-client"),[o,i]=e.ssps.pubmatic.ssp_placement_id.toString().split(":"),a=N(n,t);a.at=1,a.cur=["USD"],a.imp[0].tagid=i,a.imp[0].secure=1,a.imp[0].banner.pos="0",a.site.publisher.id=o;try{let c=await O(r,{method:"POST",contentType:"text/plain",body:JSON.stringify(a)});return c!=null&&c.ok?(c=await c.json(),E(c,"pubmatic",e.id)):(S("Response not ok",c),null)}catch(c){return console.error(c),null}}async function De({placement:e,ad_unit_code:n,data:t,bidRequest:r}){let o=P("magnite","https://prebid-server.rubiconproject.com/openrtb2/auction"),i=e.ssps.magnite.ssp_placement_id.toString().split(":").map(c=>parseInt(c));if(i.length<3)return null;let a=N(t,r);a.imp[0].ext.prebid={bidder:{rubicon:{video:{},accountId:i[0],siteId:i[1],zoneId:i[2]}},adunitcode:n};try{let c=await O(o,{method:"POST",contentType:"text/plain",body:JSON.stringify(a)});return c!=null&&c.ok?(c=await c.json(),E(c,"magnite",e.id)):null}catch(c){return console.error(c),null}}function Ce(e){let n="ig-joined-global2",t="1805860168";!navigator.runAdAuction||x(n)||setTimeout(()=>{I(n,Date.now().toString(),86400*7),ee(`${e.static_url||ye}/tag/${t}.js`)},6e3)}function Ue(){if(Y("lucead"),window.lucead_prebid_data)if(Array.isArray(window.lucead_prebid_data))for(let e of window.lucead_prebid_data)C(e);else C(window.lucead_prebid_data);window.ayads_prebid=C,window.lucead_prebid=C,window.lucead_version=ne,U&&(window.lucead_request_id=we())}Ue();})();
