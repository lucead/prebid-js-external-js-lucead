(()=>{var I=Object.defineProperty,R=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var v=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&v(e,n,t[n]);if(b)for(var n of b(t))q.call(t,n)&&v(e,n,t[n]);return e},O=(e,t)=>R(e,T(t));function _(){console.log("%c.io","background:#444;color:#fd890d;border-radius:4px;padding:2px",...arguments)}function x(){let e=["A7NuR1g6wYzd9WyYOzQ+OGtHunaTZ4cFvdcU8i8AMW67fOhUNyV65oDgGd+tP/6EfIxYbe/faGGUkeQ5Mhh3WwAAAABzeyJvcmlnaW4iOiJodHRwczovL2F5YWRzLmlvOjQ0MyIsImZlYXR1cmUiOiJGbGVkZ2VCaWRkaW5nQW5kQXVjdGlvblNlcnZlciIsImV4cGlyeSI6MTcxOTM1OTk5OSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="];for(let t of e){let n=document.createElement("meta");n.httpEquiv="origin-trial",n.content=t,document.head.appendChild(n),_("origin trial added",U(t))}}function J(e){return new Uint8Array([...atob(e)].map(t=>t.charCodeAt(0)))}function U(e){let t=J(e),n=new DataView(t.buffer),f=n.getUint8(),a=t.slice(1,65),u=n.getUint32(65,!1);return{payload:JSON.parse(new TextDecoder().decode(t.slice(69,69+u))),version:f,length:u,signature:a}}x();function k(e){return`<html lang="en"><body style="margin:0">${e}</body></html>`}async function j({ortbConverter:e,bidRequests:t,bidderRequest:n,getUniqueIdentifierStr:f,size:a,placement_id:u}){var h,g,y,p,d,r,m;let i="3890677904",l=location.hash.includes("mock")?"?mock_improve":"https://ad.360yield.com/pb",o=e({}).toORTB({bidRequests:t,bidderRequest:n});o.imp[0].ext.bidder={placementId:u||22511670},o.imp[0].banner.format=[{w:a.width||300,h:a.height||250}],o.id=f(),o.ext={improvedigital:{sdk:{name:"pbjs",version:((h=window==null?void 0:window.pbjs)==null?void 0:h.version)||"8.32.0"}}};try{let s=await fetch(l,{method:"POST",contentType:"text/plain",body:JSON.stringify(o)});return!s.ok||s.status!==200||(s=await s.json(),!((y=(g=s==null?void 0:s.seatbid[0])==null?void 0:g.bid[0])!=null&&y.price))?null:{cpm:(d=(p=s==null?void 0:s.seatbid[0])==null?void 0:p.bid[0])==null?void 0:d.price,currency:s==null?void 0:s.cur,ad:k((m=(r=s==null?void 0:s.seatbid[0])==null?void 0:r.bid[0])==null?void 0:m.adm),ad_id:i.toString()}}catch(s){debugger;return null}}window.ayads_prebid=async function(e){_("prebid companion",e);let t=e.base_url,n=e.endpoint_url,f=e.request_id,a=await fetch(`${e.static_url}/placements/ssps_params?ids=`+e.validBidRequests.map(i=>i==null?void 0:i.params.placementId).join(",")).then(i=>i.json()),u=await Promise.all(e.validBidRequests.map(async i=>{var h,g,y;let l={bid_id:i.bidId,bid:0,ad:null,size:null};if(((h=i==null?void 0:i.params)==null?void 0:h.enableContextual)===!1)return l;let o={width:i.sizes[0][0]||300,height:i.sizes[0][1]||250};try{let p={seller:t,decisionLogicUrl:`${t}/js/ssp.js`,interestGroupBuyers:[t],auctionSignals:{size:o},sellerSignals:{},sellerTimeout:1e3,sellerCurrency:"EUR",perBuyerSignals:{[t]:{prebid_bid_id:i.bidId,prebid_request_id:e.bidderRequest.bidderRequestId}},perBuyerTimeouts:{"*":1e3},resolveToConfig:!1,dataVersion:2},d=await navigator.runAdAuction(p);if(_("selected_ad",d),d){let r=document.createElement("iframe");return r.src=d,r.style.display="none",document.body.appendChild(r),r.remove(),{bid_id:i.bidId,ad:k(`<iframe src="${d}" style="width:${o.width}px;height:${o.height}px;border:none" seamless ></iframe>`),size:o}}else{let r=(g=i==null?void 0:i.params)==null?void 0:g.placementId;if(!r)return l;let m=[];if(a[r].improve&&m.push(j(O(S({},e),{size:o,placement_id:a[r].improve}))),!m.length)return l;let s=await Promise.all(m);if(s.sort((c,w)=>((w==null?void 0:w.cpm)||0)-((c==null?void 0:c.cpm)||0)),(y=s[0])!=null&&y.cpm){let c=s[0];return c.bid_id=i.bidId,c.size=o,c}else return l}}catch(p){debugger;return console.error(p),l}}));fetch(`${n}/prebid/pub`,{method:"POST",contentType:"text/plain",body:JSON.stringify({request_id:f,responses:u})}).catch(console.error)};window.ayads_prebid_data&&(window.ayads_prebid(window.ayads_prebid_data),delete window.ayads_prebid_data);})();
